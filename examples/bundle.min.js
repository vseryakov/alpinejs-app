(()=>{var n={base:"/app/",main:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:d,isS:c,isE:u,isO:v,toCamel:y};function c(e){return typeof e=="string"}function d(e){return typeof e=="function"&&e}function v(e){return typeof e=="object"&&e}function u(e){return e instanceof HTMLElement&&e}function y(e){return c(e)?e.toLowerCase().replace(/[.:_-](\w)/g,(t,a)=>a.toUpperCase()):""}n.noop=()=>{},n.log=(...e)=>console.log(...e),n.trace=(...e)=>{n.debug&&n.log(...e)},n.call=(e,t,...a)=>{if(d(e))return e(t,...a);if(typeof e=="object"){if(d(t))return t.call(e,...a);if(e&&d(e[t]))return e[t].call(e,...a)}};var p={};n.on=(e,t)=>{d(t)&&(p[e]||(p[e]=[]),p[e].push(t))},n.once=(e,t)=>{if(!d(t))return;const a=(...i)=>{n.off(e,a),t(...i)};n.on(e,a)},n.only=(e,t)=>{p[e]=d(t)?[t]:[]},n.off=(e,t)=>{if(!p[e]||!t)return;const a=p[e].indexOf(t);if(a>-1)return p[e].splice(a,1)},n.emit=(e,...t)=>{if(n.trace("emit:",e,...t),p[e])for(const a of p[e])a(...t);else if(c(e)&&e.endsWith(":*")){e=e.slice(0,-1);for(const a in p)if(a.startsWith(e))for(const i of p[a])i(...t)}},n.$param=(e,t)=>new URLSearchParams(location.search).get(e)||t||"";var b=e=>c(e)?e.replace(/#([^\s"#']+)/g,(t,a)=>`#${CSS.escape(a)}`):"";n.$=(e,t)=>(u(t)||document).querySelector(b(e)),n.$all=(e,t)=>(u(t)||document).querySelectorAll(b(e)),n.$event=(e,t,a={})=>u(e)&&e.dispatchEvent(new CustomEvent(t,{detail:a,bubbles:!0,composed:!0,cancelable:!0})),n.$on=(e,t,a,...i)=>d(a)&&e.addEventListener(t,a,...i),n.$off=(e,t,a,...i)=>d(a)&&e.removeEventListener(t,a,...i),n.$attr=(e,t,a)=>{if(c(e)&&e&&(e=n.$(e)),!!u(e))return a===void 0?e.getAttribute(t):a===null?e.removeAttribute(t):e.setAttribute(t,a)},n.$empty=(e,t)=>{if(c(e)&&e&&(e=n.$(e)),!!u(e)){for(;e.firstChild;){const a=e.firstChild;a.remove(),n.call(t,a)}return e}},n.$elem=(e,...t)=>{var a=document.createElement(e),i,o,s;v(t[0])&&(t=Object.entries(t[0]).flatMap(r=>r),s=t[1]);for(let r=0;r<t.length-1;r+=2)i=t[r],o=t[r+1],c(i)&&(d(o)?n.$on(a,i,o,{capture:s?.capture,passive:s?.passive,once:s?.once,signal:s?.signal}):i.startsWith("-")?a.style[i.substr(1)]=o:i.startsWith(".")?a[i.substr(1)]=o:i.startsWith("data-")?a.dataset[y(i.substr(5))]=o:i=="text"?a.textContent=o||"":o!==null&&a.setAttribute(i,o??""));return a},n.$parse=(e,t)=>(e=new window.DOMParser().parseFromString(e||"","text/html"),t==="doc"?e:t==="list"?Array.from(e.body.childNodes):e.body);var m=[];n.$ready=e=>{if(m.push(e),document.readyState!="loading")for(;m.length;)setTimeout(n.call,0,m.shift())},n.$on(window,"DOMContentLoaded",()=>{for(;m.length;)setTimeout(n.call,0,m.shift())}),n.parsePath=e=>{var t={name:"",params:{}},a,i=window.location;if(!c(e))return t;var o=n.base;e.startsWith(i.origin)&&(e=e.substr(i.origin.length)),e.includes("://")&&(e=e.replace(/^(.*:\/\/[^\/]*)/,"")),e.startsWith(o)&&(e=e.substr(o.length)),e.startsWith("/")&&(e=e.substr(1)),e==o.slice(1,-1)&&(e="");const s=e.indexOf("?");if(s>0&&(a=e.substr(s+1,1024),t.name=e=e.substr(0,s)),e.includes("/")){e=e.split("/").slice(0,5),t.name=e.shift();for(let r=0;r<e.length;r++)e[r]&&(t.params[`param${r+1}`]=e[r])}else t.name=e||"";if(a)for(const[r,l]of new URLSearchParams(a).entries())t.params[r]=l;return t},n.savePath=e=>{if(c(e)&&(e={name:e}),!!e?.name){var t=[e.name];if(e?.params)for(let a=1;a<5;a++)t.push(e.params[`param${a}`]||"");for(;!t.at(-1);)t.length--;t=t.join("/"),n.trace("savePath:",t,e),t&&window.history.pushState(null,"",window.location.origin+n.base+t)}},n.restorePath=e=>{n.trace("restorePath:",e,n.index),n.render(e,n.index)},n.start=()=>{n.on("path:save",n.savePath),n.on("path:restore",n.restorePath),n.$ready(n.restorePath.bind(n,window.location.href))},n.$on(window,"popstate",()=>n.emit("path:restore",window.location.href));var f={},g;n.plugin=(e,t)=>{if(!e||!c(e))throw Error("type must be defined");if(t){for(const i of["render","cleanup","data"])if(t[i]&&!d(t[i]))throw Error(i+" must be a function");d(t?.Component)&&(n[`${e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}Component`]=t.Component)}var a=f[e]=f[e]||{};return t?.default&&(g=a),Object.assign(a,t)},n.$data=(e,t)=>{c(e)&&e&&(e=n.$(e));for(const a in f){if(!f[a].data)continue;const i=f[a].data(e,t);if(i)return i}},n.resolve=(e,t)=>{const a=n.parsePath(e);n.trace("resolve:",e,t,a);var i=a.name,o=n.templates,s=n.components,r=o[i]||document.getElementById(i)?.innerHTML;if(!r&&t&&(r=o[t]||document.getElementById(t)?.innerHTML,r&&(a.name=t)),r?.startsWith("#")?r=document.getElementById(r.substr(1))?.innerHTML:r?.startsWith("$")&&(r=o[r.substr(1)]),!!r){a.template=r;var l=s[i]||s[a.name];return c(l)&&(l=s[l]),a.component=l,a}},n.render=(e,t)=>{var a=n.resolve(e?.name||e,t);if(!a)return;var i=a.params;Object.assign(i,e?.params),n.trace("render:",e,a.name,a.params);const o=n.$(i.$target||n.main);if(o){var s=a.component?.$type||e?.plugin||i.$plugin;if(s=f[s]||g,!!s?.render){if(!i.$target||i.$target==n.main){var r={name:a.name,params:i};if(n.emit(n.event,"prepare:delete",r),r.stop)return;var l=Object.values(f);for(const $ of l.filter(A=>A.cleanup))n.call($.cleanup,o);e?.nohistory||i.$nohistory||a.component?.$nohistory||queueMicrotask(()=>{n.emit("path:save",a)})}return n.emit("component:render",a),s.render(o,a),a}}};var h="alpine",x=class{template="";params={};static $type=h;constructor(e,t){this.$name=e,Object.assign(this.params,t),this._handleEvent=this.handleEvent.bind(this)}init(){n.trace("init:",this.$name),Object.assign(this.params,this.$el._x_params),n.call(this.onCreate?.bind(this)),this.params.$noevents||n.on(n.event,this._handleEvent),n.emit("component:create",{type:h,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)})}destroy(){n.trace("destroy:",this.$name),n.off(n.event,this._handleEvent),n.emit("component:delete",{type:h,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)}),n.call(this.onDelete?.bind(this)),this.params={}}handleEvent(e,...t){if(this.onEvent&&(n.trace("event:",this.$name,e,...t),n.call(this.onEvent?.bind(this.$data),e,...t)),!!c(e)){var a=y("on_"+e);this[a]&&(n.trace("event:",this.$name,a,...t),n.call(this[a]?.bind(this.$data),...t))}}},_=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{w(this,this.getAttribute("template")||this.localName.substr(4))})}};function w(e,t){if(c(t)&&(t=n.resolve(t),!t))return;n.$empty(e);const a=n.$parse(t.template,"doc");if(!t.component)Alpine.mutateDom(()=>{for(;a.head.firstChild;)e.appendChild(a.head.firstChild);for(;a.body.firstChild;){const i=a.body.firstChild;e.appendChild(i),i.nodeType==1&&Alpine.initTree(i)}});else{Alpine.data(t.name,()=>new t.component(t.name));const i=n.$elem("div","x-data",t.name,"._x_params",t.params);for(;a.head.firstChild;)e.appendChild(a.head.firstChild);for(;a.body.firstChild;)i.appendChild(a.body.firstChild);Alpine.mutateDom(()=>{e.appendChild(i),Alpine.initTree(i),delete i._x_params})}}function C(e,t){if(u(e)||(e=n.$(n.main+" div")),!!e)return typeof t=="number"?e._x_dataStack?.at(t):Alpine.closestDataStack(e)[0]}n.plugin(h,{render:w,Component:x,data:C,default:1}),n.on("alpine:init",()=>{for(const[e,t]of Object.entries(n.components)){const a=`app-${t?.$tag||e}`;t?.$type!=h||customElements.get(a)||(customElements.define(a,class extends _{}),Alpine.data(e,()=>new t(e)))}}),n.$on(document,"alpine:init",()=>{n.emit("alpine:init"),Alpine.magic("app",e=>n),Alpine.directive("render",(e,{modifiers:t,expression:a},{evaluate:i,cleanup:o})=>{const s=r=>{r.preventDefault(),n.render(i(a))};n.$on(e,"click",s),e.style.cursor="pointer",o(()=>{n.$off(e,"click",s)})}),Alpine.directive("template",(e,{expression:t},{effect:a,cleanup:i})=>{const o=Alpine.evaluateLater(e,t||"template");var s;const r=()=>{s=null,Alpine.mutateDom(()=>{n.$empty(e,l=>Alpine.destroyTree(l))})};a(()=>o(l=>{if(!l)return r();l!==s&&w(e,l),s=l})),i(r)}),Alpine.directive("scope-level",(e,{expression:t},{evaluate:a})=>{const i=Alpine.closestDataStack(e);e._x_dataStack=i.slice(0,parseInt(a(t))||0)})}),n.fetchOpts=function(e){var t=e.headers||{},a=Object.assign({headers:t,method:e.type||"POST",cache:"default"},e.fetchOptions),i=e.data;return a.method=="GET"||a.method=="HEAD"?v(i)&&(e.url+="?"+new URLSearchParams(i).toString()):c(i)?(a.body=i,t["content-type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"):i instanceof FormData?(a.body=i,delete t["content-type"]):v(i)?(a.body=JSON.stringify(i),t["content-type"]="application/json; charset=UTF-8"):i&&(a.body=i,t["content-type"]=e.contentType||"application/octet-stream"),a},n.fetch=function(e,t){try{const a=n.fetchOpts(e);window.fetch(e.url,a).then(async i=>{var o,s,r={status:i.status,headers:{},type:i.type};for(const l of i.headers)r.headers[l[0].toLowerCase()]=l[1];if(!i.ok){if(/\/json/.test(r.headers["content-type"])){const l=await i.json();o={status:i.status};for(const $ in l)o[$]=l[$]}else o={message:await i.text(),status:i.status};return n.call(t,o,s,r)}switch(e.dataType){case"text":s=await i.text();break;case"blob":s=await i.blob();break;default:s=/\/json/.test(r.headers["content-type"])?await i.json():await i.text()}n.call(t,null,s,r)}).catch(i=>{n.call(t,i)})}catch(a){n.call(t,a)}};var E=n;window.app=E})(),app.templates.dropdown=`<div class="dropdown">    <button type="button" class="btn btn-outline-dark dropdown-toggle" aria-haspopup="true" aria-expanded="false" data-bs-toggle="dropdown" x-text="title">    </button>    <div class="dropdown-menu">        <template x-for="item in options">            <a tabindex=-1 class="dropdown-item py-2" :class="value == _value(item) ? 'active' : ''" @click="_click(item)">                <span x-text="_title(item)"></span>            </a>        </template>    </div></div>`,app.components.dropdown=class extends app.AlpineComponent{title="";value="";parent="";onCreate(){this.$parent=this.$el.parentElement,this.$xdata=app.$data(this.$parent,0);var n=this.$xdata?.options||this.options;this.value=this.$parent._x_model?.get()||this.$xdata?.value||this._value(n[0]),this.title=this._title(n.find(c=>this.value==this._value(c)))}_title(n){return n?.name||n||""}_value(n){return n?.value||n?.name||n||""}_click(n){this.value=this.$parent.value=this._value(n),this.title=this._title(n),this.$parent._x_model?.set(this.value),this.$dispatch("change",n)}},app.templates.example=`<div class="bg-light border">    <h5>Example template</h5>    <div>        This HTML template is inside        \`<span x-text="$name"></span>\` component        showing \`<span x-text=template></span>\` template    </div>    <h5>Example of custom element component:</h5>    <div x-data="{ name: '', names: ['None', 'John', 'Mary', 'Chris', 'Natalie'] }">        <input x-model="name">        <app-dropdown x-data="{ options: names }" x-model="name"></app-dropdown>    </div></div>`;
