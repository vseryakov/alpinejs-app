(()=>{var i={base:"/app/",main:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:f,isS:l,isE:d,isO:m,toCamel:h};function l(e){return typeof e=="string"}function f(e){return typeof e=="function"&&e}function m(e){return typeof e=="object"&&e}function d(e){return e instanceof HTMLElement&&e}function h(e){return l(e)?e.toLowerCase().replace(/[.:_-](\w)/g,(t,r)=>r.toUpperCase()):""}i.noop=()=>{};i.log=(...e)=>console.log(...e);i.trace=(...e)=>{i.debug&&i.log(...e)};i.call=(e,t,...r)=>{if(f(e))return e(t,...r);if(typeof e=="object"){if(f(t))return t.call(e,...r);if(e&&f(e[t]))return e[t].call(e,...r)}};var p={};i.on=(e,t)=>{f(t)&&(p[e]||(p[e]=[]),p[e].push(t))};i.once=(e,t)=>{if(!f(t))return;let r=(...n)=>{i.off(e,r),t(...n)};i.on(e,r)};i.only=(e,t)=>{p[e]=f(t)?[t]:[]};i.off=(e,t)=>{if(!p[e]||!t)return;let r=p[e].indexOf(t);if(r>-1)return p[e].splice(r,1)};i.emit=(e,...t)=>{if(i.trace("emit:",e,...t),p[e])for(let r of p[e])r(...t);else if(l(e)&&e.endsWith(":*")){e=e.slice(0,-1);for(let r in p)if(r.startsWith(e))for(let n of p[r])n(...t)}};i.$param=(e,t)=>new URLSearchParams(location.search).get(e)||t||"";var C=e=>l(e)?e.replace(/#([^\s"#']+)/g,(t,r)=>`#${CSS.escape(r)}`):"";i.$=(e,t)=>(d(t)||document).querySelector(C(e));i.$all=(e,t)=>(d(t)||document).querySelectorAll(C(e));i.$event=(e,t,r={})=>d(e)&&e.dispatchEvent(new CustomEvent(t,{detail:r,bubbles:!0,composed:!0,cancelable:!0}));i.$on=(e,t,r,...n)=>f(r)&&e.addEventListener(t,r,...n);i.$off=(e,t,r,...n)=>f(r)&&e.removeEventListener(t,r,...n);i.$attr=(e,t,r)=>{if(l(e)&&e&&(e=i.$(e)),!!d(e))return r===void 0?e.getAttribute(t):r===null?e.removeAttribute(t):e.setAttribute(t,r)};i.$empty=(e,t)=>{if(l(e)&&e&&(e=i.$(e)),!!d(e)){for(;e.firstChild;){let r=e.firstChild;r.remove(),i.call(t,r)}return e}};i.$elem=(e,...t)=>{var r=document.createElement(e),n,o,s;m(t[0])&&(t=Object.entries(t[0]).flatMap(a=>a),s=t[1]);for(let a=0;a<t.length-1;a+=2)n=t[a],o=t[a+1],l(n)&&(f(o)?i.$on(r,n,o,{capture:s?.capture,passive:s?.passive,once:s?.once,signal:s?.signal}):n.startsWith("-")?r.style[n.substr(1)]=o:n.startsWith(".")?r[n.substr(1)]=o:n.startsWith("data-")?r.dataset[h(n.substr(5))]=o:n=="text"?r.textContent=o||"":o!==null&&r.setAttribute(n,o??""));return r};i.$parse=(e,t)=>(e=new window.DOMParser().parseFromString(e||"","text/html"),t==="doc"?e:t==="list"?Array.from(e.body.childNodes):e.body);var y=[];i.$ready=e=>{if(y.push(e),document.readyState!="loading")for(;y.length;)setTimeout(i.call,0,y.shift())};i.$on(window,"DOMContentLoaded",()=>{for(;y.length;)setTimeout(i.call,0,y.shift())});i.parsePath=e=>{var t={name:"",params:{}},r,n=window.location;if(!l(e))return t;var o=i.base;e.startsWith(n.origin)&&(e=e.substr(n.origin.length)),e.includes("://")&&(e=e.replace(/^(.*:\/\/[^\/]*)/,"")),e.startsWith(o)&&(e=e.substr(o.length)),e.startsWith("/")&&(e=e.substr(1)),e==o.slice(1,-1)&&(e="");let s=e.indexOf("?");if(s>0&&(r=e.substr(s+1,1024),t.name=e=e.substr(0,s)),e.includes("/")){e=e.split("/").slice(0,5),t.name=e.shift();for(let a=0;a<e.length;a++)e[a]&&(t.params[`param${a+1}`]=e[a])}else t.name=e||"";if(r)for(let[a,c]of new URLSearchParams(r).entries())t.params[a]=c;return t};i.savePath=e=>{if(l(e)&&(e={name:e}),!!e?.name){var t=[e.name];if(e?.params)for(let r=1;r<5;r++)t.push(e.params[`param${r}`]||"");for(;!t.at(-1);)t.length--;t=t.join("/"),i.trace("savePath:",t,e),t&&(i.emit("path:push",window.location.origin+i.base+t),window.history.pushState(null,"",window.location.origin+i.base+t))}};i.restorePath=e=>{i.trace("restorePath:",e,i.index),i.render(e,i.index)};i.start=()=>{i.on("path:save",i.savePath),i.on("path:restore",i.restorePath),i.$ready(i.restorePath.bind(i,window.location.href))};i.$on(window,"popstate",()=>i.emit("path:restore",window.location.href));var u={},x;i.plugin=(e,t)=>{if(!e||!l(e))throw Error("type must be defined");if(t){for(let n of["render","cleanup","data"])if(t[n]&&!f(t[n]))throw Error(n+" must be a function");f(t?.Component)&&(i[`${e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}Component`]=t.Component)}var r=u[e]=u[e]||{};return t?.default&&(x=r),Object.assign(r,t)};i.$data=(e,t)=>{l(e)&&e&&(e=i.$(e));for(let r in u){if(!u[r].data)continue;let n=u[r].data(e,t);if(n)return n}};i.resolve=(e,t)=>{let r=i.parsePath(e);i.trace("resolve:",e,t,r);var n=r.name,o=i.templates,s=i.components,a=o[n]||document.getElementById(n)?.innerHTML;if(!a&&t&&(a=o[t]||document.getElementById(t)?.innerHTML,a&&(r.name=t)),a?.startsWith("#")?a=document.getElementById(a.substr(1))?.innerHTML:a?.startsWith("$")&&(a=o[a.substr(1)]),!!a){r.template=a;var c=s[n]||s[r.name];return l(c)&&(c=s[c]),r.component=c,r}};i.render=(e,t)=>{var r=i.resolve(e?.name||e,t);if(!r)return;var n=r.params;Object.assign(n,e?.params),i.trace("render:",e,r.name,r.params);let o=i.$(n.$target||i.main);if(o){var s=r.component?.$type||e?.plugin||n.$plugin;if(s=u[s]||x,!!s?.render){if(!n.$target||n.$target==i.main){var a={name:r.name,params:n};if(i.emit(i.event,"prepare:delete",a),a.stop)return;var c=Object.values(u);for(let w of c.filter(A=>A.cleanup))i.call(w.cleanup,o);e?.nohistory||n.$nohistory||r.component?.$nohistory||queueMicrotask(()=>{i.emit("path:save",r)})}return i.emit("component:render",r),s.render(o,r),r}}};var $="alpine",b=class{template="";params={};static $type=$;constructor(t,r){this.$name=t,Object.assign(this.params,r),this._handleEvent=this.handleEvent.bind(this)}init(){i.trace("init:",this.$name),Object.assign(this.params,this.$el._x_params),i.call(this.onCreate?.bind(this)),this.params.$noevents||i.on(i.event,this._handleEvent),i.emit("component:create",{type:$,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)})}destroy(){i.trace("destroy:",this.$name),i.off(i.event,this._handleEvent),i.emit("component:delete",{type:$,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)}),i.call(this.onDelete?.bind(this)),this.params={}}handleEvent(t,...r){if(this.onEvent&&(i.trace("event:",this.$name,t,...r),i.call(this.onEvent?.bind(this.$data),t,...r)),!!l(t)){var n=h("on_"+t);this[n]&&(i.trace("event:",this.$name,n,...r),i.call(this[n]?.bind(this.$data),...r))}}},v=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{g(this,this.getAttribute("template")||this.localName.substr(4))})}};function g(e,t){if(l(t)&&(t=i.resolve(t),!t))return;i.$empty(e);let r=i.$parse(t.template,"doc");if(!t.component)Alpine.mutateDom(()=>{for(;r.head.firstChild;)e.appendChild(r.head.firstChild);for(;r.body.firstChild;){let n=r.body.firstChild;e.appendChild(n),n.nodeType==1&&Alpine.initTree(n)}});else{Alpine.data(t.name,()=>new t.component(t.name));let n=i.$elem("div","x-data",t.name,"._x_params",t.params);for(;r.head.firstChild;)e.appendChild(r.head.firstChild);for(;r.body.firstChild;)n.appendChild(r.body.firstChild);Alpine.mutateDom(()=>{e.appendChild(n),Alpine.initTree(n),delete n._x_params})}}function S(e,t){if(d(e)||(e=i.$(i.main+" div")),!!e)return typeof t=="number"?e._x_dataStack?.at(t):Alpine.closestDataStack(e)[0]}i.plugin($,{render:g,Component:b,data:S,default:1});i.on("alpine:init",()=>{for(let[e,t]of Object.entries(i.components)){let r=`app-${t?.$tag||e}`;t?.$type!=$||customElements.get(r)||(customElements.define(r,class extends v{}),Alpine.data(e,()=>new t(e)))}});i.$on(document,"alpine:init",()=>{i.emit("alpine:init"),Alpine.magic("app",e=>i),Alpine.directive("render",(e,{modifiers:t,expression:r},{evaluate:n,cleanup:o})=>{let s=a=>{a.preventDefault(),i.render(n(r))};i.$on(e,"click",s),e.style.cursor="pointer",o(()=>{i.$off(e,"click",s)})}),Alpine.directive("template",(e,{expression:t},{effect:r,cleanup:n})=>{let o=Alpine.evaluateLater(e,t||"template");var s;let a=()=>{s=null,Alpine.mutateDom(()=>{i.$empty(e,c=>Alpine.destroyTree(c))})};r(()=>o(c=>{if(!c)return a();c!==s&&g(e,c),s=c})),n(a)}),Alpine.directive("scope-level",(e,{expression:t},{evaluate:r})=>{let n=Alpine.closestDataStack(e);e._x_dataStack=n.slice(0,parseInt(r(t))||0)})});i.fetchOpts=function(e){var t=e.headers||{},r=Object.assign({headers:t,method:e.type||"POST",cache:"default"},e.fetchOptions),n=e.data;return r.method=="GET"||r.method=="HEAD"?m(n)&&(e.url+="?"+new URLSearchParams(n).toString()):l(n)?(r.body=n,t["content-type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"):n instanceof FormData?(r.body=n,delete t["content-type"]):m(n)?(r.body=JSON.stringify(n),t["content-type"]="application/json; charset=UTF-8"):n&&(r.body=n,t["content-type"]=e.contentType||"application/octet-stream"),r};i.fetch=function(e,t){try{let r=i.fetchOpts(e);window.fetch(e.url,r).then(async n=>{var o,s,a={status:n.status,headers:{},type:n.type};for(let c of n.headers)a.headers[c[0].toLowerCase()]=c[1];if(!n.ok){if(/\/json/.test(a.headers["content-type"])){let c=await n.json();o={status:n.status};for(let w in c)o[w]=c[w]}else o={message:await n.text(),status:n.status};return i.call(t,o,s,a)}switch(e.dataType){case"text":s=await n.text();break;case"blob":s=await n.blob();break;default:s=/\/json/.test(a.headers["content-type"])?await n.json():await n.text()}i.call(t,null,s,a)}).catch(n=>{i.call(t,n)})}catch(r){i.call(t,r)}};var E=i;window.app=E;})();
