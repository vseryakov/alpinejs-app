(()=>{var r={base:"/app/",main:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:f,isS:l,isE:d,isO:m,toCamel:h};function l(e){return typeof e=="string"}function f(e){return typeof e=="function"&&e}function m(e){return typeof e=="object"&&e}function d(e){return e instanceof HTMLElement&&e}function h(e){return l(e)?e.toLowerCase().replace(/[.:_-](\w)/g,(t,i)=>i.toUpperCase()):""}r.noop=()=>{};r.log=(...e)=>console.log(...e);r.trace=(...e)=>{r.debug&&r.log(...e)};r.call=(e,t,...i)=>{if(f(e))return e(t,...i);if(typeof e=="object"){if(f(t))return t.call(e,...i);if(e&&f(e[t]))return e[t].call(e,...i)}};var p={};r.on=(e,t)=>{f(t)&&(p[e]||(p[e]=[]),p[e].push(t))};r.once=(e,t)=>{if(!f(t))return;let i=(...n)=>{r.off(e,i),t(...n)};r.on(e,i)};r.only=(e,t)=>{p[e]=f(t)?[t]:[]};r.off=(e,t)=>{if(!p[e]||!t)return;let i=p[e].indexOf(t);if(i>-1)return p[e].splice(i,1)};r.emit=(e,...t)=>{if(r.trace("emit:",e,...t),p[e])for(let i of p[e])i(...t);else if(l(e)&&e.endsWith(":*")){e=e.slice(0,-1);for(let i in p)if(i.startsWith(e))for(let n of p[i])n(...t)}};r.$param=(e,t)=>new URLSearchParams(location.search).get(e)||t||"";var C=e=>l(e)?e.replace(/#([^\s"#']+)/g,(t,i)=>`#${CSS.escape(i)}`):"";r.$=(e,t)=>(d(t)||document).querySelector(C(e));r.$all=(e,t)=>(d(t)||document).querySelectorAll(C(e));r.$event=(e,t,i={})=>d(e)&&e.dispatchEvent(new CustomEvent(t,{detail:i,bubbles:!0,composed:!0,cancelable:!0}));r.$on=(e,t,i,...n)=>f(i)&&e.addEventListener(t,i,...n);r.$off=(e,t,i,...n)=>f(i)&&e.removeEventListener(t,i,...n);r.$attr=(e,t,i)=>{if(l(e)&&e&&(e=r.$(e)),!!d(e))return i===void 0?e.getAttribute(t):i===null?e.removeAttribute(t):e.setAttribute(t,i)};r.$empty=(e,t)=>{if(l(e)&&e&&(e=r.$(e)),!!d(e)){for(;e.firstChild;){let i=e.firstChild;i.remove(),r.call(t,i)}return e}};r.$elem=(e,...t)=>{var i=document.createElement(e),n,o;m(t[0])&&(t=Object.entries(t[0]).flatMap(s=>s));for(let s=0;s<t.length-1;s+=2)n=t[s],o=t[s+1],l(n)&&(f(o)?r.$on(i,n,o):n.startsWith(".")?i.style[n.substr(1)]=o:n.startsWith(":")?i[n.substr(1)]=o:n.startsWith("data-")?i.dataset[h(n.substr(5))]=o:n=="text"?i.textContent=o||"":o!==null&&i.setAttribute(n,o??""));return i};r.$parse=(e,t)=>(e=new window.DOMParser().parseFromString(e||"","text/html"),t==="doc"?e:t==="list"?Array.from(e.body.childNodes):e.body);var y=[];r.$ready=e=>{if(y.push(e),document.readyState!="loading")for(;y.length;)setTimeout(r.call,0,y.shift())};r.$on(window,"DOMContentLoaded",()=>{for(;y.length;)setTimeout(r.call,0,y.shift())});r.parsePath=e=>{var t={name:"",params:{}},i,n=window.location;if(!l(e))return t;var o=r.base;e.startsWith(n.origin)&&(e=e.substr(n.origin.length)),e.includes("://")&&(e=e.replace(/^(.*:\/\/[^\/]*)/,"")),e.startsWith(o)&&(e=e.substr(o.length)),e.startsWith("/")&&(e=e.substr(1)),e==o.slice(1,-1)&&(e="");let s=e.indexOf("?");if(s>0&&(i=e.substr(s+1,1024),t.name=e=e.substr(0,s)),e.includes("/")){e=e.split("/").slice(0,5),t.name=e.shift();for(let a=0;a<e.length;a++)e[a]&&(t.params[`param${a+1}`]=e[a])}else t.name=e||"";if(i)for(let[a,c]of new URLSearchParams(i).entries())t.params[a]=c;return t};r.savePath=e=>{if(l(e)&&(e={name:e}),!!e?.name){var t=[e.name];if(e?.params)for(let i=1;i<5;i++)t.push(e.params[`param${i}`]||"");for(;!t.at(-1);)t.length--;t=t.join("/"),r.trace("savePath:",t,e),t&&window.history.pushState(null,"",window.location.origin+r.base+t)}};r.restorePath=e=>{r.trace("restorePath:",e,r.index),r.render(e,r.index)};r.start=()=>{r.on("path:save",r.savePath),r.on("path:restore",r.restorePath),r.$ready(r.restorePath.bind(r,window.location.href))};r.$on(window,"popstate",()=>r.emit("path:restore",window.location.href));var u={},x;r.plugin=(e,t)=>{if(!e||!l(e))throw Error("type must be defined");if(t){for(let n of["render","cleanup","data"])if(t[n]&&!f(t[n]))throw Error(n+" must be a function");f(t?.Component)&&(r[`${e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}Component`]=t.Component)}var i=u[e]=u[e]||{};return t?.default&&(x=i),Object.assign(i,t)};r.$data=(e,t)=>{l(e)&&e&&(e=r.$(e));for(let i in u){if(!u[i].data)continue;let n=u[i].data(e,t);if(n)return n}};r.resolve=(e,t)=>{let i=r.parsePath(e);r.trace("resolve:",e,t,i);var n=i.name,o=r.templates,s=r.components,a=o[n]||document.getElementById(n)?.innerHTML;if(!a&&t&&(a=o[t]||document.getElementById(t)?.innerHTML,a&&(i.name=t)),a?.startsWith("#")?a=document.getElementById(a.substr(1))?.innerHTML:a?.startsWith("$")&&(a=o[a.substr(1)]),!!a){i.template=a;var c=s[n]||s[i.name];return l(c)&&(c=s[c]),i.component=c,i}};r.render=(e,t)=>{var i=r.resolve(e?.name||e,t);if(!i)return;var n=i.params;Object.assign(n,e?.params),r.trace("render:",e,i.name,i.params);let o=r.$(n.$target||r.main);if(o){var s=i.component?.$type||e?.plugin||n.$plugin;if(s=u[s]||x,!!s?.render){if(!n.$target||n.$target==r.main){var a={name:i.name,params:n};if(r.emit(r.event,"prepare:delete",a),a.stop)return;var c=Object.values(u);for(let w of c.filter(A=>A.cleanup))r.call(w.cleanup,o);e?.nohistory||n.$nohistory||i.component?.$nohistory||queueMicrotask(()=>{r.emit("path:save",i)})}return r.emit("component:render",i),s.render(o,i),i}}};var $="alpine",b=class{template="";params={};static $type=$;constructor(t,i){this.$name=t,Object.assign(this.params,i),this._handleEvent=this.handleEvent.bind(this)}init(){r.trace("init:",this.$name),Object.assign(this.params,this.$el._x_params),r.call(this.onCreate?.bind(this)),this.params.$noevents||r.on(r.event,this._handleEvent),r.emit("component:create",{type:$,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)})}destroy(){r.trace("destroy:",this.$name),r.off(r.event,this._handleEvent),r.emit("component:delete",{type:$,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)}),r.call(this.onDelete?.bind(this)),this.params={}}handleEvent(t,...i){if(this.onEvent&&(r.trace("event:",this.$name,t,...i),r.call(this.onEvent?.bind(this.$data),t,...i)),!!l(t)){var n=h("on_"+t);this[n]&&(r.trace("event:",this.$name,n,...i),r.call(this[n]?.bind(this.$data),...i))}}},v=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{g(this,this.getAttribute("template")||this.localName.substr(4))})}};function g(e,t){if(l(t)&&(t=r.resolve(t),!t))return;r.$empty(e);let i=r.$parse(t.template,"doc");if(!t.component)Alpine.mutateDom(()=>{for(;i.head.firstChild;)e.appendChild(i.head.firstChild);for(;i.body.firstChild;){let n=i.body.firstChild;e.appendChild(n),n.nodeType==1&&Alpine.initTree(n)}});else{Alpine.data(t.name,()=>new t.component(t.name));let n=r.$elem("div","x-data",t.name,":_x_params",t.params);for(;i.head.firstChild;)e.appendChild(i.head.firstChild);for(;i.body.firstChild;)n.appendChild(i.body.firstChild);Alpine.mutateDom(()=>{e.appendChild(n),Alpine.initTree(n),delete n._x_params})}}function S(e,t){if(d(e)||(e=r.$(r.main+" div")),!!e)return typeof t=="number"?e._x_dataStack?.at(t):Alpine.closestDataStack(e)[0]}r.plugin($,{render:g,Component:b,data:S,default:1});r.on("alpine:init",()=>{for(let[e,t]of Object.entries(r.components)){let i=`app-${t?.$tag||e}`;t?.$type!=$||customElements.get(i)||(customElements.define(i,class extends v{}),Alpine.data(e,()=>new t(e)))}});r.$on(document,"alpine:init",()=>{r.emit("alpine:init"),Alpine.magic("app",e=>r),Alpine.directive("render",(e,{modifiers:t,expression:i},{evaluate:n,cleanup:o})=>{let s=a=>{a.preventDefault(),r.render(n(i))};r.$on(e,"click",s),e.style.cursor="pointer",o(()=>{r.$off(e,"click",s)})}),Alpine.directive("template",(e,{expression:t},{effect:i,cleanup:n})=>{let o=Alpine.evaluateLater(e,t||"template");var s;let a=()=>{s=null,Alpine.mutateDom(()=>{r.$empty(e,c=>Alpine.destroyTree(c))})};i(()=>o(c=>{if(!c)return a();c!==s&&g(e,c),s=c})),n(a)}),Alpine.directive("scope-level",(e,{expression:t},{evaluate:i})=>{let n=Alpine.closestDataStack(e);e._x_dataStack=n.slice(0,parseInt(i(t))||0)})});r.fetchOpts=function(e){var t=e.headers||{},i=Object.assign({headers:t,method:e.type||"POST",cache:"default"},e.fetchOptions),n=e.data;return i.method=="GET"||i.method=="HEAD"?m(n)&&(e.url+="?"+new URLSearchParams(n).toString()):l(n)?(i.body=n,t["content-type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"):n instanceof FormData?(i.body=n,delete t["content-type"]):m(n)?(i.body=JSON.stringify(n),t["content-type"]="application/json; charset=UTF-8"):n&&(i.body=n,t["content-type"]=e.contentType||"application/octet-stream"),i};r.fetch=function(e,t){try{let i=r.fetchOpts(e);window.fetch(e.url,i).then(async n=>{var o,s,a={status:n.status,headers:{},type:n.type};for(let c of n.headers)a.headers[c[0].toLowerCase()]=c[1];if(!n.ok){if(/\/json/.test(a.headers["content-type"])){let c=await n.json();o={status:n.status};for(let w in c)o[w]=c[w]}else o={message:await n.text(),status:n.status};return r.call(t,o,s,a)}switch(e.dataType){case"text":s=await n.text();break;case"blob":s=await n.blob();break;default:s=/\/json/.test(a.headers["content-type"])?await n.json():await n.text()}r.call(t,null,s,a)}).catch(n=>{r.call(t,n)})}catch(i){r.call(t,i)}};var E=r;window.app=E;})();
