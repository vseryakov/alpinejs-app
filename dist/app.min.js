(()=>{var r={base:"/app/",$target:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:u,isS:c,isE:m,isO:h,isN:U,isA:q,toCamel:b,call:g,escape:H,noop:L,log:M,trace:W,__:F};function L(){}function W(...e){r.debug&&r.log(...e)}function M(...e){console.log(...e)}function F(...e){return e.join("")}function q(e,t){return Array.isArray(e)&&e.length?e:t}function U(e){return typeof e=="number"?e:void 0}function c(e){return typeof e=="string"&&e}function u(e){return typeof e=="function"&&e}function h(e){return typeof e=="object"&&e}function m(e){return e instanceof HTMLElement&&e}function b(e){return c(e)?e.toLowerCase().replace(/[.:_-](\w)/g,(t,n)=>n.toUpperCase()):""}function g(e,t,...n){if(u(e))return e(t,...n);if(typeof e=="object"){if(u(t))return t.call(e,...n);if(e&&u(e[t]))return e[t].call(e,...n)}}var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};function H(e){return typeof e!="string"?"":e.replace(/([&<>'":])/g,(t,n)=>N[n]||n)}var l={};r.on=(e,t,n)=>{u(t)&&(l[e]||(l[e]=[]),l[e].push([t,c(n)]))};r.once=(e,t,n)=>{if(!u(t))return;let i=(...s)=>{r.off(e,i),t(...s)};r.on(e,i,n)};r.only=(e,t,n)=>{l[e]=u(t)?[t,c(n)]:[]};r.off=(e,t)=>{if(e&&t){if(!l[e])return;let n=u(t)?0:c(t)?1:-1;n>=0&&(l[e]=l[e].filter(i=>i[n]!==t))}else if(c(e))for(let n in l)l[n]=l[n].filter(i=>i[1]!==e)};r.emit=(e,...t)=>{if(r.trace("emit:",e,...t,r.debug>1&&l[e]),l[e])for(let n of l[e])n[0](...t);else if(c(e)&&e.endsWith(":*")){e=e.slice(0,-1);for(let n in l)if(n.startsWith(e))for(let i of l[n])i[0](...t)}};r.$param=(e,t)=>new URLSearchParams(location.search).get(e)||t||"";var P=e=>e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`);r.$=(e,t)=>c(e)?(m(t)||document).querySelector(P(e)):null;r.$all=(e,t)=>c(e)?(m(t)||document).querySelectorAll(P(e)):null;r.$event=(e,t,n={})=>e instanceof EventTarget&&e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}));r.$on=(e,t,n,...i)=>u(n)&&e.addEventListener(t,n,...i);r.$off=(e,t,n,...i)=>u(n)&&e.removeEventListener(t,n,...i);r.$attr=(e,t,n)=>{if(c(e)&&(e=r.$(e)),!!m(e))return n===void 0?e.getAttribute(t):n===null?e.removeAttribute(t):e.setAttribute(t,n)};r.$empty=(e,t)=>{if(c(e)&&(e=r.$(e)),!!m(e)){for(;e.firstChild;){let n=e.firstChild;n.remove(),r.call(t,n)}return e}};r.$elem=(e,...t)=>{var n=document.createElement(e),i,s,o;h(t[0])&&(t=Object.entries(t[0]).flatMap(a=>a),o=t[1]);for(let a=0;a<t.length-1;a+=2)i=t[a],s=t[a+1],c(i)&&(u(s)?r.$on(n,i,s,{capture:o?.capture,passive:o?.passive,once:o?.once,signal:o?.signal}):i.startsWith("-")?n.style[i.substr(1)]=s:i.startsWith(".")?n[i.substr(1)]=s:i.startsWith("data-")?n.dataset[b(i.substr(5))]=s:i=="text"?n.textContent=s||"":s!==null&&n.setAttribute(i,s??""));return n};r.$parse=(e,t)=>(e=new window.DOMParser().parseFromString(e||"","text/html"),t==="doc"?e:t==="list"?Array.from(e.body.childNodes):e.body);r.$append=(e,t,n)=>{if(c(e)&&(e=r.$(e)),!m(e))return;let i;if(c(t))i=r.$parse(t,"doc");else if(t?.content?.nodeType==11)i={body:t.content.cloneNode(!0)};else return e;let s;for(;s=i.head?.firstChild;)e.appendChild(s);for(;s=i.body.firstChild;)e.appendChild(s),n&&s.nodeType==1&&r.call(n,s);return e};var x=[];r.$ready=e=>{if(x.push(e),document.readyState!="loading")for(;x.length;)setTimeout(r.call,0,x.shift())};r.$on(window,"DOMContentLoaded",()=>{for(;x.length;)setTimeout(r.call,0,x.shift())});function _(){var e=document.documentElement.clientWidth;r.emit("dom:changed",{breakPoint:e<576?"xs":e<768?"sm":e<992?"md":e<1200?"lg":e<1400?"xl":"xxl",colorScheme:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"})}r.$ready(()=>{_(),r.$on(window.matchMedia("(prefers-color-scheme: dark)"),"change",_);var e;r.$on(window,"resize",()=>{clearTimeout(e),e=setTimeout(_,250)})});r.parsePath=e=>{var t={name:"",params:{}},n,i=window.location;if(h(e))return Object.assign(t,e);if(!c(e))return t;var s=r.base;e.startsWith(i.origin)&&(e=e.substr(i.origin.length)),e.includes("://")&&(e=e.replace(/^(.*:\/\/[^/]*)/,"")),e.startsWith(s)&&(e=e.substr(s.length)),e.startsWith("/")&&(e=e.substr(1)),e==s.slice(1,-1)&&(e="");let o=e.indexOf("?");if(o>0&&(n=e.substr(o+1,1024),t.name=e=e.substr(0,o)),e.endsWith(".html")&&(e=e.slice(0,-5)),e.includes("/")){e=e.split("/").slice(0,7),t.name=e.shift();for(let a=0;a<e.length;a++)e[a]&&(t.params[`param${a+1}`]=e[a])}else t.name=e||"";if(n)for(let[a,p]of new URLSearchParams(n).entries())t.params[a]=p;return t};r.savePath=e=>{if(c(e)&&(e={name:e}),!!e?.name){var t=[e.name];if(e?.params)for(let n=1;n<7;n++)t.push(e.params[`param${n}`]||"");for(;!t.at(-1);)t.length--;t=t.join("/"),r.trace("savePath:",t,e),t&&(r.emit("path:push",window.location.origin+r.base+t),window.history.pushState(null,"",window.location.origin+r.base+t))}};r.restorePath=e=>{r.trace("restorePath:",e,r.index),r.render(e,r.index)};r.start=()=>{r.on("path:save",r.savePath),r.on("path:restore",r.restorePath),r.$ready(r.restorePath.bind(r,window.location.href))};r.$on(window,"popstate",()=>r.emit("path:restore",window.location.href));var y={},T;r.plugin=(e,t)=>{if(!e||!c(e))throw Error("type must be defined");if(t){for(let i of["render","cleanup","data"])if(t[i]&&!u(t[i]))throw Error(i+" must be a function");u(t?.Component)&&(r[`${e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}Component`]=t.Component)}var n=y[e]=y[e]||{};return t?.default&&(T=n),Object.assign(n,t)};r.$data=(e,t)=>{c(e)&&(e=r.$(e));for(let n in y){if(!y[n].data)continue;let i=y[n].data(e,t);if(i)return i}};r.resolve=(e,t)=>{let n=r.parsePath(e);r.trace("resolve:",e,t,n);var i=n?.name,s=r.templates,o=r.components,a=n.template||s[i]||document.getElementById(i);if(!a&&t&&(a=s[t]||document.getElementById(t),a&&(n.name=t)),c(a)&&a.startsWith("#")?a=document.getElementById(n.otemplate=a.substr(1)):c(a)&&a.startsWith("$")&&(a=s[n.otemplate=a.substr(1)]),!!a){n.template=a;var p=o[i]||o[n.name];return c(p)&&(p=o[n.ocomponent=p]),n.component=p,n}};r.render=(e,t)=>{var n=r.resolve(e,t);if(!n)return;var i=n.params=Object.assign(n.params||{},e?.params);i.$target=e.$target||i.$target||r.$target,r.trace("render:",e,n.name,n.params);let s=m(i.$target)||r.$(i.$target);if(s){var o=n.component?.$type||e?.plugin||i.$plugin;if(o=y[o]||T,!!o?.render){if(i.$target==r.$target){var a={name:n.name,params:i};if(r.emit(r.event,"prepare:delete",a),a.stop)return;var p=Object.values(y);for(let f of p.filter(d=>d.cleanup))r.call(f.cleanup,s);e?.$nohistory||i.$nohistory||n.component?.$nohistory||r.$nohistory||queueMicrotask(()=>{r.emit("path:save",n)})}return r.emit("component:render",n),o.render(s,n),n}}};r.stylePlugin=function(e){u(e)&&j.push(e)};var j=[];function R(e){if(e instanceof HTMLElement)for(let t of j)t(e)}r.on("alpine:init",()=>{for(let e in y)r.call(y[e],"init");r.on("component:create",e=>{m(e?.element)&&R(e.element)})});var $=r.fetchOptions={method:"GET",cache:"default",headers:{}};function I(e,t){let n=t?.headers||{},i=Object.assign({headers:n,method:t?.method||t?.post&&"POST"||void 0},t?.request);for(let o in $.headers)n[o]??=$.headers[o];for(let o of["method","cache","credentials","duplex","integrity","keepalive","mode","priority","redirect","referrer","referrerPolicy","signal"])$[o]!==void 0&&(i[o]??=$[o]);var s=t?.body;return i.method=="GET"||i.method=="HEAD"?h(s)&&(e+="?"+new URLSearchParams(s).toString()):c(s)?(i.body=s,n["content-type"]??="application/x-www-form-urlencoded; charset=UTF-8"):s instanceof FormData?(i.body=s,delete n["content-type"]):h(s)?(i.body=JSON.stringify(s),n["content-type"]="application/json; charset=UTF-8"):s&&(i.body=s,n["content-type"]??="application/octet-stream"),[e,i]}function B(e){let t={status:e.status,headers:{},type:e.type,url:e.url,redirected:e.redirected};for(let s of e.headers)t.headers[s[0].toLowerCase()]=s[1];let n=$.csrfHeader||"x-csrf-token",i=t?.headers[n];return i&&(i<=0?delete $.headers[n]:$.headers[n]=i),t}r.fetch=function(e,t,n){u(t)&&(n=t,t=null);try{let[i,s]=I(e,t);r.trace("fetch:",i,s,t),window.fetch(i,s).then(async o=>{var a,p,f=B(o);if(!o.ok){if(/\/json/.test(f.headers["content-type"])){let d=await o.json();a={status:o.status};for(let O in d)a[O]=d[O]}else a={message:await o.text(),status:o.status};return g(n,a,p,f)}switch(t?.dataType){case"text":p=await o.text();break;case"blob":p=await o.blob();break;default:p=/\/json/.test(f.headers["content-type"])?await o.json():await o.text()}g(n,null,p,f)}).catch(o=>{g(n,o)})}catch(i){g(n,i)}};r.afetch=function(e,t){return new Promise((n,i)=>{r.fetch(e,t,(s,o,a)=>{n({ok:!s,status:a.status,err:s,data:o,info:a})})})};var E=class{params={};constructor(t,n){this.$name=t,Object.assign(this.params,n),this._handleEvent=z.bind(this),this._onCreate=this.onCreate||null,this._onDelete=this.onDelete||null}init(t){r.trace("init:",this.$type,this.$name),Object.assign(this.params,t),r.emit("component:create",{type:this.$type,name:this.$name,component:this,element:this.$el,params:this.params}),this.params.$noevents||r.on(r.event,this._handleEvent),r.call(this._onCreate?.bind(this,this.params))}destroy(){r.trace("destroy:",this.$type,this.$name),r.off(r.event,this._handleEvent),r.emit("component:delete",{type:this.$type,name:this.$name,component:this,element:this.$el,params:this.params}),r.call(this._onDelete?.bind(this)),this.params={},delete this.$root}};function z(e,...t){if(this.onEvent&&(r.trace("event:",this.$type,this.$name,e,...t),r.call(this.onEvent?.bind(this.$data||this),e,...t)),!!c(e)){var n=b("on_"+e);this[n]&&(r.trace("event:",this.$type,this.$name,n,...t),r.call(this[n]?.bind(this.$data||this),...t))}}var v=E;var w="alpine",A=class extends v{static $type=w;constructor(t,n){super(t,n),this.$type=w}init(){super.init(this.$root.parentElement._x_params)}},C=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{S(this,this.localName.substr(4))})}};function S(e,t){if(!(c(t)&&(t=r.resolve(t),!t))){if(r.$empty(e),e._x_params=Object.assign({},t.params),Alpine.onElRemoved(e,()=>{delete e._x_params}),!t.component)Alpine.mutateDom(()=>{r.$append(e,t.template,Alpine.initTree)});else{Alpine.data(t.name,()=>new t.component(t.name));let n=r.$elem("div","x-data",t.name);r.$append(n,t.template),Alpine.mutateDom(()=>{e.appendChild(n),Alpine.initTree(n)})}return t}}function G(e,t){if(m(e)||(e=r.$(r.$target+" div")),!!e)return typeof t=="number"?e._x_dataStack?.at(t):Alpine.closestDataStack(e)[0]}function J(){for(let[e,t]of Object.entries(r.components)){let n=`app-${t?.$tag||e}`;t?.$type!=w||customElements.get(n)||(customElements.define(n,class extends C{}),Alpine.data(e,()=>new t(e)))}}function D(e,t,n,i){let s=n.includes("cache"),o={post:n.includes("post")};!t.url&&!(!s&&/^(https?:\/\/|\/|.+\.html(\?|$)).+/.test(t))&&i(e,t)||r.fetch(t,o,(a,p,f)=>{if(a||!c(p))return console.warn("$render: Text expected from",t,"got",a,p);let d=c(t)?r.parsePath(t):t;d.template=p,d.name=d.params?.$name||d.name,s&&(r.templates[d.name]=p),i(e,d)})}function K(e,t,n){let i={},s=o=>{for(let p=0;p<n.length;p++){let f=n[p];switch(f){case"params":var a=Alpine.$data(e);if(!h(a[n[p+1]]))break;o.params=Object.assign(a[n[p+1]],o.params);break;case"inline":i.inline="inline-block";break;default:i[f]=f}}return o};D(e,t,n,(o,a)=>{if(a=r.resolve(a),!!a&&S(o,s(a)))return i.show&&(i.nonempty&&!o.firstChild?o.style.setProperty("display","none",i.important):o.style.setProperty("display",i.flex||i.inline||"block",i.important)),!0})}r.plugin(w,{render:S,Component:A,data:G,init:J,default:1});r.$on(document,"alpine:init",()=>{r.emit("alpine:init"),Alpine.magic("app",e=>r),Alpine.magic("params",e=>{for(;e;){if(e._x_params)return e._x_params;e=e.parentElement}}),Alpine.magic("component",e=>Alpine.closestDataStack(e).find(t=>t.$type==w&&t.$name)),Alpine.magic("parent",e=>Alpine.closestDataStack(e).filter(t=>t.$type==w&&t.$name)[1]),Alpine.directive("render",(e,{modifiers:t,expression:n},{evaluate:i,cleanup:s})=>{let o=a=>{let p=i(n);p&&(a.preventDefault(),t.includes("stop")&&a.stopPropagation(),D(e,p,t,(f,d)=>r.render(d)))};r.$on(e,"click",o),e.style.cursor="pointer",s(()=>{r.$off(e,"click",o)})}),Alpine.directive("template",(e,{modifiers:t,expression:n},{effect:i,cleanup:s})=>{let o=Alpine.evaluateLater(e,n);var a;let p=()=>{a=null,Alpine.mutateDom(()=>{r.$empty(e,f=>Alpine.destroyTree(f)),t.includes("show")&&e.style.setProperty("display","none",t.includes("important")?"important":void 0)})};i(()=>o(f=>{if(!f)return p();f!==a&&K(e,f,t),a=f})),s(p)}),Alpine.directive("scope-level",(e,{expression:t},{evaluate:n})=>{let i=Alpine.closestDataStack(e);e._x_dataStack=i.slice(0,parseInt(n(t||""))||0)})});r.Component=v;var k=r;window.app=k;})();
