(()=>{var n={base:"/app/",main:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:l,isS:o,isE:d,isO:y,toCamel:w};function o(t){return typeof t=="string"&&t}function l(t){return typeof t=="function"&&t}function y(t){return typeof t=="object"&&t}function d(t){return t instanceof HTMLElement&&t}function w(t){return o(t)?t.toLowerCase().replace(/[.:_-](\w)/g,(e,i)=>i.toUpperCase()):""}n.noop=()=>{};n.log=(...t)=>console.log(...t);n.trace=(...t)=>{n.debug&&n.log(...t)};n.call=(t,e,...i)=>{if(l(t))return t(e,...i);if(typeof t=="object"){if(l(e))return e.call(t,...i);if(t&&l(t[e]))return t[e].call(t,...i)}};var f={};n.on=(t,e,i)=>{l(e)&&(f[t]||(f[t]=[]),f[t].push([e,o(i)]))};n.once=(t,e,i)=>{if(!l(e))return;let r=(...s)=>{n.off(t,r),e(...s)};n.on(t,r,i)};n.only=(t,e,i)=>{f[t]=l(e)?[e,o(i)]:[]};n.off=(t,e)=>{if(t&&e){if(!f[t])return;let i=l(e)?0:o(e)?1:-1;i>=0&&(f[t]=f[t].filter(r=>r[i]!==e))}else if(o(t))for(let i in f)f[i]=f[i].filter(r=>r[1]!==t)};n.emit=(t,...e)=>{if(n.trace("emit:",t,...e,n.debug>1&&f[t]),f[t])for(let i of f[t])i[0](...e);else if(o(t)&&t.endsWith(":*")){t=t.slice(0,-1);for(let i in f)if(i.startsWith(t))for(let r of f[i])r[0](...e)}};n.$param=(t,e)=>new URLSearchParams(location.search).get(t)||e||"";var P=t=>t.replace(/#([^\s"#']+)/g,(e,i)=>`#${CSS.escape(i)}`);n.$=(t,e)=>o(t)?(d(e)||document).querySelector(P(t)):null;n.$all=(t,e)=>o(t)?(d(e)||document).querySelectorAll(P(t)):null;n.$event=(t,e,i={})=>t instanceof EventTarget&&t.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0,composed:!0,cancelable:!0}));n.$on=(t,e,i,...r)=>l(i)&&t.addEventListener(e,i,...r);n.$off=(t,e,i,...r)=>l(i)&&t.removeEventListener(e,i,...r);n.$attr=(t,e,i)=>{if(o(t)&&(t=n.$(t)),!!d(t))return i===void 0?t.getAttribute(e):i===null?t.removeAttribute(e):t.setAttribute(e,i)};n.$empty=(t,e)=>{if(o(t)&&(t=n.$(t)),!!d(t)){for(;t.firstChild;){let i=t.firstChild;i.remove(),n.call(e,i)}return t}};n.$elem=(t,...e)=>{var i=document.createElement(t),r,s,c;y(e[0])&&(e=Object.entries(e[0]).flatMap(a=>a),c=e[1]);for(let a=0;a<e.length-1;a+=2)r=e[a],s=e[a+1],o(r)&&(l(s)?n.$on(i,r,s,{capture:c?.capture,passive:c?.passive,once:c?.once,signal:c?.signal}):r.startsWith("-")?i.style[r.substr(1)]=s:r.startsWith(".")?i[r.substr(1)]=s:r.startsWith("data-")?i.dataset[w(r.substr(5))]=s:r=="text"?i.textContent=s||"":s!==null&&i.setAttribute(r,s??""));return i};n.$parse=(t,e)=>(t=new window.DOMParser().parseFromString(t||"","text/html"),e==="doc"?t:e==="list"?Array.from(t.body.childNodes):t.body);n.$append=(t,e,i)=>{if(o(t)&&(t=n.$(t)),!d(t))return;let r;if(o(e))r=n.$parse(e,"doc");else if(e?.content?.nodeType==11)r={body:e.content.cloneNode(!0)};else return t;let s;for(;s=r.head?.firstChild;)t.appendChild(s);for(;s=r.body.firstChild;)t.appendChild(s),i&&s.nodeType==1&&n.call(i,s);return t};var g=[];n.$ready=t=>{if(g.push(t),document.readyState!="loading")for(;g.length;)setTimeout(n.call,0,g.shift())};n.$on(window,"DOMContentLoaded",()=>{for(;g.length;)setTimeout(n.call,0,g.shift())});n.parsePath=t=>{var e={name:"",params:{}},i,r=window.location;if(!o(t))return e;var s=n.base;t.startsWith(r.origin)&&(t=t.substr(r.origin.length)),t.includes("://")&&(t=t.replace(/^(.*:\/\/[^\/]*)/,"")),t.startsWith(s)&&(t=t.substr(s.length)),t.startsWith("/")&&(t=t.substr(1)),t==s.slice(1,-1)&&(t="");let c=t.indexOf("?");if(c>0&&(i=t.substr(c+1,1024),e.name=t=t.substr(0,c)),t.includes("/")){t=t.split("/").slice(0,5),e.name=t.shift();for(let a=0;a<t.length;a++)t[a]&&(e.params[`param${a+1}`]=t[a])}else e.name=t||"";if(i)for(let[a,p]of new URLSearchParams(i).entries())e.params[a]=p;return e};n.savePath=t=>{if(o(t)&&(t={name:t}),!!t?.name){var e=[t.name];if(t?.params)for(let i=1;i<5;i++)e.push(t.params[`param${i}`]||"");for(;!e.at(-1);)e.length--;e=e.join("/"),n.trace("savePath:",e,t),e&&(n.emit("path:push",window.location.origin+n.base+e),window.history.pushState(null,"",window.location.origin+n.base+e))}};n.restorePath=t=>{n.trace("restorePath:",t,n.index),n.render(t,n.index)};n.start=()=>{n.on("path:save",n.savePath),n.on("path:restore",n.restorePath),n.$ready(n.restorePath.bind(n,window.location.href))};n.$on(window,"popstate",()=>n.emit("path:restore",window.location.href));var m={},T;n.plugin=(t,e)=>{if(!t||!o(t))throw Error("type must be defined");if(e){for(let r of["render","cleanup","data"])if(e[r]&&!l(e[r]))throw Error(r+" must be a function");l(e?.Component)&&(n[`${t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()}Component`]=e.Component)}var i=m[t]=m[t]||{};return e?.default&&(T=i),Object.assign(i,e)};n.$data=(t,e)=>{o(t)&&(t=n.$(t));for(let i in m){if(!m[i].data)continue;let r=m[i].data(t,e);if(r)return r}};n.resolve=(t,e)=>{let i=n.parsePath(t);n.trace("resolve:",t,e,i);var r=i.name,s=n.templates,c=n.components,a=s[r]||document.getElementById(r);if(!a&&e&&(a=s[e]||document.getElementById(e),a&&(i.name=e)),o(a)&&a.startsWith("#")?a=document.getElementById(a.substr(1)):o(a)&&a.startsWith("$")&&(a=s[a.substr(1)]),!!a){i.template=a;var p=c[r]||c[i.name];return o(p)&&(p=c[p]),i.component=p,i}};n.render=(t,e)=>{var i=n.resolve(t?.name||t,e);if(!i)return;var r=i.params;Object.assign(r,t?.params),r.$target=r.$target||n.main,n.trace("render:",t,i.name,i.params);let s=n.$(r.$target);if(s){var c=i.component?.$type||t?.plugin||r.$plugin;if(c=m[c]||T,!!c?.render){if(r.$target==n.main){var a={name:i.name,params:r};if(n.emit(n.event,"prepare:delete",a),a.stop)return;var p=Object.values(m);for(let u of p.filter(v=>v.cleanup))n.call(u.cleanup,s);t?.nohistory||r.$nohistory||i.component?.$nohistory||queueMicrotask(()=>{n.emit("path:save",i)})}return n.emit("component:render",i),c.render(s,i),i}}};n.on("alpine:init",()=>{for(let t in m)n.call(m[t],"init")});var E=class{params={};constructor(e,i){this.$name=e,Object.assign(this.params,i),this._handleEvent=j.bind(this),this._onCreate=this.onCreate||null,this._onDelete=this.onDelete||null}init(e){n.trace("init:",this.$type,this.$name),Object.assign(this.params,e),n.emit("component:create",{type:this.$type,name:this.$name,component:this,element:this.$el,params:this.params}),this.params.$noevents||n.on(n.event,this._handleEvent),n.call(this._onCreate?.bind(this,this.params))}destroy(){n.trace("destroy:",this.$type,this.$name),n.off(n.event,this._handleEvent),n.emit("component:delete",{type:this.$type,name:this.$name,component:this,element:this.$el,params:this.params}),n.call(this._onDelete?.bind(this)),this.params={},delete this.$root}};function j(t,...e){if(this.onEvent&&(n.trace("event:",this.$type,this.$name,t,...e),n.call(this.onEvent?.bind(this.$data||this),t,...e)),!!o(t)){var i=w("on_"+t);this[i]&&(n.trace("event:",this.$type,this.$name,i,...e),n.call(this[i]?.bind(this.$data||this),...e))}}var C=E;var $="alpine",_=class extends C{static $type=$;constructor(e,i){super(e,i),this.$type=$}init(){super.init(this.$root._x_params)}},A=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{O(this,this.localName.substr(4))})}};function O(t,e){if(!(o(e)&&(e=n.resolve(e),!e))){if(n.$empty(t),!e.component)Alpine.mutateDom(()=>{n.$append(t,e.template,Alpine.initTree)});else{Alpine.data(e.name,()=>new e.component(e.name));let i=n.$elem("div","x-data",e.name,"._x_params",e.params);n.$append(i,e.template),Alpine.mutateDom(()=>{t.appendChild(i),Alpine.initTree(i),delete i._x_params})}return e}}function L(t,e){if(d(t)||(t=n.$(n.main+" div")),!!t)return typeof e=="number"?t._x_dataStack?.at(e):Alpine.closestDataStack(t)[0]}function W(){for(let[t,e]of Object.entries(n.components)){let i=`app-${e?.$tag||t}`;e?.$type!=$||customElements.get(i)||(customElements.define(i,class extends A{}),Alpine.data(t,()=>new e(t)))}}n.plugin($,{render:O,Component:_,data:L,init:W,default:1});n.$on(document,"alpine:init",()=>{n.emit("alpine:init"),Alpine.magic("app",t=>n),Alpine.magic("component",t=>Alpine.closestDataStack(t).find(e=>e.$type==$&&e.$name)),Alpine.magic("parent",t=>Alpine.closestDataStack(t).filter(e=>e.$type==$&&e.$name)[1]),Alpine.directive("render",(t,{modifiers:e,expression:i},{evaluate:r,cleanup:s})=>{let c=a=>{let p=r(i);p&&(a.preventDefault(),a.stopPropagation(),n.render(p))};n.$on(t,"click",c),t.style.cursor="pointer",s(()=>{n.$off(t,"click",c)})}),Alpine.directive("template",(t,{modifiers:e,expression:i},{effect:r,cleanup:s})=>{let c=Alpine.evaluateLater(t,i);var a;let p=()=>{a=null,Alpine.mutateDom(()=>{n.$empty(t,u=>Alpine.destroyTree(u)),e.includes("show")&&t.style.setProperty("display","none",e.includes("important")?"important":void 0)})};r(()=>c(u=>{if(!u)return p();if(u!==a){let x=n.resolve(u);if(!x)return;let h={};for(let b=0;b<e.length;b++){let S=e[b];switch(S){case"params":var v=Alpine.$data(t);if(!y(v[e[b+1]]))break;x.params=Object.assign(v[e[b+1]],x.params);break;case"inline":h.inline="inline-block";break;default:h[S]=S}}O(t,x)&&h.show&&(h.nonempty&&!t.firstChild?t.style.setProperty("display","none",h.important):t.style.setProperty("display",h.flex||h.inline||"block",h.important))}a=u})),s(p)}),Alpine.directive("scope-level",(t,{expression:e},{evaluate:i})=>{let r=Alpine.closestDataStack(t);t._x_dataStack=r.slice(0,parseInt(i(e||""))||0)})});n.fetchOpts=function(t){var e=t.headers||{},i=Object.assign({headers:e,method:t.type||"POST",cache:"default"},t.fetchOptions),r=t.data;return i.method=="GET"||i.method=="HEAD"?y(r)&&(t.url+="?"+new URLSearchParams(r).toString()):o(r)?(i.body=r,e["content-type"]=t.contentType||"application/x-www-form-urlencoded; charset=UTF-8"):r instanceof FormData?(i.body=r,delete e["content-type"]):y(r)?(i.body=JSON.stringify(r),e["content-type"]="application/json; charset=UTF-8"):r&&(i.body=r,e["content-type"]=t.contentType||"application/octet-stream"),i};n.fetch=function(t,e){try{let i=n.fetchOpts(t);window.fetch(t.url,i).then(async r=>{var s,c,a={status:r.status,headers:{},type:r.type};for(let p of r.headers)a.headers[p[0].toLowerCase()]=p[1];if(!r.ok){if(/\/json/.test(a.headers["content-type"])){let p=await r.json();s={status:r.status};for(let u in p)s[u]=p[u]}else s={message:await r.text(),status:r.status};return n.call(e,s,c,a)}switch(t.dataType){case"text":c=await r.text();break;case"blob":c=await r.blob();break;default:c=/\/json/.test(a.headers["content-type"])?await r.json():await r.text()}n.call(e,null,c,a)}).catch(r=>{n.call(e,r)})}catch(i){n.call(e,i)}};n.Component=C;var D=n;window.app=D;})();
