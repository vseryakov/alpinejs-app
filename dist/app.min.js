(()=>{var n={base:"/app/",main:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:p,isS:c,isE:u,isO:h,toCamel:y};function c(e){return typeof e=="string"}function p(e){return typeof e=="function"&&e}function h(e){return typeof e=="object"&&e}function u(e){return e instanceof HTMLElement&&e}function y(e){return c(e)?e.toLowerCase().replace(/[.:_-](\w)/g,(t,i)=>i.toUpperCase()):""}n.noop=()=>{};n.log=(...e)=>console.log(...e);n.trace=(...e)=>{n.debug&&n.log(...e)};n.call=(e,t,...i)=>{if(p(e))return e(t,...i);if(typeof e=="object"){if(p(t))return t.call(e,...i);if(e&&p(e[t]))return e[t].call(e,...i)}};var f={};n.on=(e,t)=>{p(t)&&(f[e]||(f[e]=[]),f[e].push(t))};n.once=(e,t)=>{if(!p(t))return;let i=(...r)=>{n.off(e,i),t(...r)};n.on(e,i)};n.only=(e,t)=>{f[e]=p(t)?[t]:[]};n.off=(e,t)=>{if(!f[e]||!t)return;let i=f[e].indexOf(t);if(i>-1)return f[e].splice(i,1)};n.emit=(e,...t)=>{if(n.trace("emit:",e,...t,n.debug>1&&f[e]),f[e])for(let i of f[e])i(...t);else if(c(e)&&e.endsWith(":*")){e=e.slice(0,-1);for(let i in f)if(i.startsWith(e))for(let r of f[i])r(...t)}};n.$param=(e,t)=>new URLSearchParams(location.search).get(e)||t||"";var C=e=>c(e)?e.replace(/#([^\s"#']+)/g,(t,i)=>`#${CSS.escape(i)}`):"";n.$=(e,t)=>(u(t)||document).querySelector(C(e));n.$all=(e,t)=>(u(t)||document).querySelectorAll(C(e));n.$event=(e,t,i={})=>u(e)&&e.dispatchEvent(new CustomEvent(t,{detail:i,bubbles:!0,composed:!0,cancelable:!0}));n.$on=(e,t,i,...r)=>p(i)&&e.addEventListener(t,i,...r);n.$off=(e,t,i,...r)=>p(i)&&e.removeEventListener(t,i,...r);n.$attr=(e,t,i)=>{if(c(e)&&e&&(e=n.$(e)),!!u(e))return i===void 0?e.getAttribute(t):i===null?e.removeAttribute(t):e.setAttribute(t,i)};n.$empty=(e,t)=>{if(c(e)&&e&&(e=n.$(e)),!!u(e)){for(;e.firstChild;){let i=e.firstChild;i.remove(),n.call(t,i)}return e}};n.$elem=(e,...t)=>{var i=document.createElement(e),r,s,o;h(t[0])&&(t=Object.entries(t[0]).flatMap(a=>a),o=t[1]);for(let a=0;a<t.length-1;a+=2)r=t[a],s=t[a+1],c(r)&&(p(s)?n.$on(i,r,s,{capture:o?.capture,passive:o?.passive,once:o?.once,signal:o?.signal}):r.startsWith("-")?i.style[r.substr(1)]=s:r.startsWith(".")?i[r.substr(1)]=s:r.startsWith("data-")?i.dataset[y(r.substr(5))]=s:r=="text"?i.textContent=s||"":s!==null&&i.setAttribute(r,s??""));return i};n.$parse=(e,t)=>(e=new window.DOMParser().parseFromString(e||"","text/html"),t==="doc"?e:t==="list"?Array.from(e.body.childNodes):e.body);var w=[];n.$ready=e=>{if(w.push(e),document.readyState!="loading")for(;w.length;)setTimeout(n.call,0,w.shift())};n.$on(window,"DOMContentLoaded",()=>{for(;w.length;)setTimeout(n.call,0,w.shift())});n.parsePath=e=>{var t={name:"",params:{}},i,r=window.location;if(!c(e))return t;var s=n.base;e.startsWith(r.origin)&&(e=e.substr(r.origin.length)),e.includes("://")&&(e=e.replace(/^(.*:\/\/[^\/]*)/,"")),e.startsWith(s)&&(e=e.substr(s.length)),e.startsWith("/")&&(e=e.substr(1)),e==s.slice(1,-1)&&(e="");let o=e.indexOf("?");if(o>0&&(i=e.substr(o+1,1024),t.name=e=e.substr(0,o)),e.includes("/")){e=e.split("/").slice(0,5),t.name=e.shift();for(let a=0;a<e.length;a++)e[a]&&(t.params[`param${a+1}`]=e[a])}else t.name=e||"";if(i)for(let[a,l]of new URLSearchParams(i).entries())t.params[a]=l;return t};n.savePath=e=>{if(c(e)&&(e={name:e}),!!e?.name){var t=[e.name];if(e?.params)for(let i=1;i<5;i++)t.push(e.params[`param${i}`]||"");for(;!t.at(-1);)t.length--;t=t.join("/"),n.trace("savePath:",t,e),t&&(n.emit("path:push",window.location.origin+n.base+t),window.history.pushState(null,"",window.location.origin+n.base+t))}};n.restorePath=e=>{n.trace("restorePath:",e,n.index),n.render(e,n.index)};n.start=()=>{n.on("path:save",n.savePath),n.on("path:restore",n.restorePath),n.$ready(n.restorePath.bind(n,window.location.href))};n.$on(window,"popstate",()=>n.emit("path:restore",window.location.href));var m={},x;n.plugin=(e,t)=>{if(!e||!c(e))throw Error("type must be defined");if(t){for(let r of["render","cleanup","data"])if(t[r]&&!p(t[r]))throw Error(r+" must be a function");p(t?.Component)&&(n[`${e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}Component`]=t.Component)}var i=m[e]=m[e]||{};return t?.default&&(x=i),Object.assign(i,t)};n.$data=(e,t)=>{c(e)&&e&&(e=n.$(e));for(let i in m){if(!m[i].data)continue;let r=m[i].data(e,t);if(r)return r}};n.resolve=(e,t)=>{let i=n.parsePath(e);n.trace("resolve:",e,t,i);var r=i.name,s=n.templates,o=n.components,a=s[r]||document.getElementById(r)?.innerHTML;if(!a&&t&&(a=s[t]||document.getElementById(t)?.innerHTML,a&&(i.name=t)),a?.startsWith("#")?a=document.getElementById(a.substr(1))?.innerHTML:a?.startsWith("$")&&(a=s[a.substr(1)]),!!a){i.template=a;var l=o[r]||o[i.name];return c(l)&&(l=o[l]),i.component=l,i}};n.render=(e,t)=>{var i=n.resolve(e?.name||e,t);if(!i)return;var r=i.params;Object.assign(r,e?.params),n.trace("render:",e,i.name,i.params);let s=n.$(r.$target||n.main);if(s){var o=i.component?.$type||e?.plugin||r.$plugin;if(o=m[o]||x,!!o?.render){if(!r.$target||r.$target==n.main){var a={name:i.name,params:r};if(n.emit(n.event,"prepare:delete",a),a.stop)return;var l=Object.values(m);for(let d of l.filter(E=>E.cleanup))n.call(d.cleanup,s);e?.nohistory||r.$nohistory||i.component?.$nohistory||queueMicrotask(()=>{n.emit("path:save",i)})}return n.emit("component:render",i),o.render(s,i),i}}};var $="alpine",b=class{params={};static $type=$;constructor(t,i){this.$name=t,Object.assign(this.params,i),this._handleEvent=this.handleEvent.bind(this),this._onCreate=this.onCreate||null,this._onDelete=this.onDelete||null}init(){n.trace("init:",this.$name),Object.assign(this.params,this.$el._x_params),n.call(this._onCreate?.bind(this)),this.params.$noevents||n.on(n.event,this._handleEvent),n.emit("component:create",{type:$,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)})}destroy(){n.trace("destroy:",this.$name),n.off(n.event,this._handleEvent),n.emit("component:delete",{type:$,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)}),n.call(this._onDelete?.bind(this)),this.params={}}handleEvent(t,...i){if(this.onEvent&&(n.trace("event:",this.$name,t,...i),n.call(this.onEvent?.bind(this.$data),t,...i)),!!c(t)){var r=y("on_"+t);this[r]&&(n.trace("event:",this.$name,r,...i),n.call(this[r]?.bind(this.$data),...i))}}},v=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{g(this,this.getAttribute("template")||this.localName.substr(4))})}};function g(e,t){if(c(t)&&(t=n.resolve(t),!t))return;n.$empty(e);let i=n.$parse(t.template,"doc");if(!t.component)Alpine.mutateDom(()=>{for(;i.head.firstChild;)e.appendChild(i.head.firstChild);for(;i.body.firstChild;){let r=i.body.firstChild;e.appendChild(r),r.nodeType==1&&Alpine.initTree(r)}});else{Alpine.data(t.name,()=>new t.component(t.name));let r=n.$elem("div","x-data",t.name,"._x_params",t.params);for(;i.head.firstChild;)e.appendChild(i.head.firstChild);for(;i.body.firstChild;)r.appendChild(i.body.firstChild);Alpine.mutateDom(()=>{e.appendChild(r),Alpine.initTree(r),delete r._x_params})}return t}function A(e,t){if(u(e)||(e=n.$(n.main+" div")),!!e)return typeof t=="number"?e._x_dataStack?.at(t):Alpine.closestDataStack(e)[0]}n.plugin($,{render:g,Component:b,data:A,default:1});n.on("alpine:init",()=>{for(let[e,t]of Object.entries(n.components)){let i=`app-${t?.$tag||e}`;t?.$type!=$||customElements.get(i)||(customElements.define(i,class extends v{}),Alpine.data(e,()=>new t(e)))}});n.$on(document,"alpine:init",()=>{n.emit("alpine:init"),Alpine.magic("app",e=>n),Alpine.directive("render",(e,{modifiers:t,expression:i},{evaluate:r,cleanup:s})=>{let o=a=>{a.preventDefault(),n.render(r(i))};n.$on(e,"click",o),e.style.cursor="pointer",s(()=>{n.$off(e,"click",o)})}),Alpine.directive("template",(e,{modifiers:t,expression:i},{effect:r,cleanup:s})=>{let o=Alpine.evaluateLater(e,i);var a;let l=()=>{a=null,Alpine.mutateDom(()=>{n.$empty(e,d=>Alpine.destroyTree(d)),t.includes("show")&&e.style.setProperty("display","none",t.includes("important")?"important":void 0)})};r(()=>o(d=>{if(!d)return l();d!==a&&g(e,d)&&t.includes("show")&&(t.includes("nonempty")&&!e.firstChild?e.style.setProperty("display","none",t.includes("important")?"important":void 0):e.style.setProperty("display",t.includes("flex")?"flex":t.includes("inline")?"inline-block":"block",t.includes("important")?"important":void 0)),a=d})),s(l)}),Alpine.directive("scope-level",(e,{expression:t},{evaluate:i})=>{let r=Alpine.closestDataStack(e);e._x_dataStack=r.slice(0,parseInt(i(t))||0)})});n.fetchOpts=function(e){var t=e.headers||{},i=Object.assign({headers:t,method:e.type||"POST",cache:"default"},e.fetchOptions),r=e.data;return i.method=="GET"||i.method=="HEAD"?h(r)&&(e.url+="?"+new URLSearchParams(r).toString()):c(r)?(i.body=r,t["content-type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"):r instanceof FormData?(i.body=r,delete t["content-type"]):h(r)?(i.body=JSON.stringify(r),t["content-type"]="application/json; charset=UTF-8"):r&&(i.body=r,t["content-type"]=e.contentType||"application/octet-stream"),i};n.fetch=function(e,t){try{let i=n.fetchOpts(e);window.fetch(e.url,i).then(async r=>{var s,o,a={status:r.status,headers:{},type:r.type};for(let l of r.headers)a.headers[l[0].toLowerCase()]=l[1];if(!r.ok){if(/\/json/.test(a.headers["content-type"])){let l=await r.json();s={status:r.status};for(let d in l)s[d]=l[d]}else s={message:await r.text(),status:r.status};return n.call(t,s,o,a)}switch(e.dataType){case"text":o=await r.text();break;case"blob":o=await r.blob();break;default:o=/\/json/.test(a.headers["content-type"])?await r.json():await r.text()}n.call(t,null,o,a)}).catch(r=>{n.call(t,r)})}catch(i){n.call(t,i)}};var _=n;window.app=_;})();
