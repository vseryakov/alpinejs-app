(()=>{var r={base:"/app/",main:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:f,isS:l,isE:u,isO:d};function f(e){return typeof e=="function"}function l(e){return typeof e=="string"}function d(e){return typeof e=="object"&&e}function u(e){return e instanceof HTMLElement?e:void 0}function w(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}r.noop=()=>{};r.log=(...e)=>console.log(...e);r.trace=(...e)=>{r.debug&&r.log(...e)};r.call=(e,t,...n)=>{if(f(e))return e(t,...n);if(typeof e=="object"){if(f(t))return t.call(e,...n);if(e&&f(e[t]))return e[t].call(e,...n)}};var p={};r.on=(e,t)=>{f(t)&&(p[e]||(p[e]=[]),p[e].push(t))};r.once=(e,t)=>{if(!f(t))return;let n=(...i)=>{r.off(e,n),t(...i)};r.on(e,n)};r.only=(e,t)=>{p[e]=f(t)?[t]:[]};r.off=(e,t)=>{if(!p[e]||!t)return;let n=p[e].indexOf(t);if(n>-1)return p[e].splice(n,1)};r.emit=(e,...t)=>{if(r.trace("emit:",e,...t),p[e])for(let n of p[e])n(...t);else if(l(e)&&e.endsWith(":*")){e=e.slice(0,-1);for(let n in p)if(n.startsWith(e))for(let i of p[n])i(...t)}};r.$param=(e,t)=>new URLSearchParams(location.search).get(e)||t||"";var x=e=>l(e)?e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`):"";r.$=(e,t)=>(u(t)||document).querySelector(x(e));r.$all=(e,t)=>(u(t)||document).querySelectorAll(x(e));r.$event=(e,t,n={})=>u(e)&&e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}));r.$on=(e,t,n,...i)=>f(n)&&e.addEventListener(t,n,...i);r.$off=(e,t,n,...i)=>f(n)&&e.removeEventListener(t,n,...i);r.$attr=(e,t,n)=>{if(l(e)&&e&&(e=r.$(e)),!!u(e))return n===void 0?e.getAttribute(t):n===null?e.removeAttribute(t):e.setAttribute(t,n)};r.$empty=(e,t)=>{if(l(e)&&e&&(e=r.$(e)),!!u(e)){for(;e.firstChild;){let n=e.firstChild;n.remove(),r.call(t,n)}return e}};r.$elem=(e,...t)=>{var n=document.createElement(e),i,o;d(t[0])&&(t=Object.entries(t[0]).flatMap(s=>s));for(let s=0;s<t.length-1;s+=2)i=t[s],o=t[s+1],l(i)&&(f(o)?r.$on(n,i,o):i.startsWith(".")?n.style[i.substr(1)]=o:i.startsWith(":")?n[i.substr(1)]=o:i.startsWith("data-")?n.dataset[w(i.substr(5))]=o:i=="text"?n.textContent=o||"":o!==null&&n.setAttribute(i,o??""));return n};r.$parse=(e,t)=>(e=new window.DOMParser().parseFromString(e||"","text/html").body,t?Array.from(e.childNodes):e);var h=[];r.$ready=e=>{if(h.push(e),document.readyState!="loading")for(;h.length;)setTimeout(r.call,0,h.shift())};r.$on(window,"DOMContentLoaded",()=>{for(;h.length;)setTimeout(r.call,0,h.shift())});r.parsePath=e=>{var t={name:"",params:{}},n,i=window.location;if(!l(e))return t;var o=r.base;e.startsWith(i.origin)&&(e=e.substr(i.origin.length)),e.includes("://")&&(e=e.replace(/^(.*:\/\/[^\/]*)/,"")),e.startsWith(o)&&(e=e.substr(o.length)),e.startsWith("/")&&(e=e.substr(1)),e==o.slice(1,-1)&&(e="");let s=e.indexOf("?");if(s>0&&(n=e.substr(s+1,1024),t.name=e=e.substr(0,s)),e.includes("/")){e=e.split("/").slice(0,5),t.name=e.shift();for(let a=0;a<e.length;a++)e[a]&&(t.params[`param${a+1}`]=e[a])}else t.name=e||"";if(n)for(let[a,c]of new URLSearchParams(n).entries())t.params[a]=c;return t};r.savePath=e=>{if(l(e)&&(e={name:e}),!!e?.name){var t=[e.name];if(e?.params)for(let n=1;n<5;n++)t.push(e.params[`param${n}`]||"");for(;!t.at(-1);)t.length--;t=t.join("/"),r.trace("savePath:",t,e),t&&window.history.pushState(null,"",window.location.origin+r.base+t)}};r.restorePath=e=>{r.trace("restorePath:",e,r.index),r.render(e,r.index)};r.start=()=>{r.on("path:save",r.savePath),r.on("path:restore",r.restorePath),r.$ready(r.restorePath.bind(r,window.location.href))};r.$on(window,"popstate",()=>r.emit("path:restore",window.location.href));var m={},C;r.plugin=(e,t)=>{if(!e||!l(e))throw Error("type must be defined");if(t){for(let i of["render","cleanup","data"])if(t[i]&&!f(t[i]))throw Error(i+" must be a function");f(t?.Component)&&(r[`${e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}Component`]=t.Component)}var n=m[e]=m[e]||{};return t?.default&&(C=n),Object.assign(n,t)};r.$data=e=>{l(e)&&e&&(e=r.$(e));for(let t in m){if(!m[t].data)continue;let n=m[t].data(e);if(n)return n}};r.resolve=(e,t)=>{let n=r.parsePath(e);r.trace("resolve:",e,t,n);var i=n.name,o=r.templates,s=r.components,a=o[i]||document.getElementById(i)?.innerHTML;if(!a&&t&&(a=o[t]||document.getElementById(t)?.innerHTML,a&&(n.name=t)),a?.startsWith("#")?a=document.getElementById(a.substr(1))?.innerHTML:a?.startsWith("$")&&(a=o[a.substr(1)]),!!a){n.template=a;var c=s[i]||s[n.name];return l(c)&&(c=s[c]),n.component=c,n}};r.render=(e,t)=>{var n=r.resolve(e?.name||e,t);if(!n)return;var i=n.params;Object.assign(i,e?.params),r.trace("render:",e,n.name,n.params);let o=r.$(i.$target||r.main);if(o){var s=n.component?.$type||e?.plugin||i.$plugin;if(s=m[s]||C,!!s?.render){if(!i.$target||i.$target==r.main){var a={name:n.name,params:i};if(r.emit(r.event,"prepare:delete",a),a.stop)return;var c=Object.values(m);for(let $ of c.filter(A=>A.cleanup))r.call($.cleanup,o);e?.nohistory||i.$nohistory||n.component?.$nohistory||queueMicrotask(()=>{r.emit("path:save",n)})}return r.emit("component:render",n),s.render(o,n),n}}};var y="alpine",b=class{template="";params={};static $type=y;constructor(t,n){this.$name=t,Object.assign(this.params,n),this._handleEvent=this.handleEvent.bind(this)}init(){r.trace("init:",this.$name),Object.assign(this.params,this.$el._x_params),r.call(this.onCreate?.bind(this)),this.params.$noevents||r.on(r.event,this._handleEvent),r.emit("component:create",{type:y,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)})}destroy(){r.trace("destroy:",this.$name),r.off(r.event,this._handleEvent),r.emit("component:delete",{type:y,name:this.$name,component:this,element:this.$el,params:Alpine.raw(this.params)}),r.call(this.onDelete?.bind(this)),this.params={}}handleEvent(t,...n){if(r.trace("event:",this.$name,...n),r.call(this.onEvent?.bind(this.$data),t,...n),!!l(t)){var i=w("on_"+t);r.call(this[i]?.bind(this.$data),...n)}}},v=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{g(this,this.getAttribute("template")||this.localName.substr(4))})}};function g(e,t){if(l(t)&&(t=r.resolve(t),!t))return;r.$empty(e);let n=r.$parse(t.template);if(!t.component)Alpine.mutateDom(()=>{for(;n.firstChild;){let i=n.firstChild;e.appendChild(i),i.nodeType==1&&Alpine.initTree(i)}});else{Alpine.data(t.name,()=>new t.component(t.name));let i=r.$elem("div","x-data",t.name,":_x_params",t.params);for(;n.firstChild;)i.appendChild(n.firstChild);Alpine.mutateDom(()=>{e.appendChild(i),Alpine.initTree(i),delete i._x_params})}}function S(e){return u(e)||(e=r.$(r.main+" div")),e&&Alpine.closestDataStack(e)[0]}r.plugin(y,{render:g,Component:b,data:S,default:1});r.on("alpine:init",()=>{for(let[e,t]of Object.entries(r.components)){let n=`app-${t?.$tag||e}`;t?.$type!=y||customElements.get(n)||(customElements.define(n,class extends v{}),Alpine.data(e,()=>new t(e)))}});r.$on(document,"alpine:init",()=>{r.emit("alpine:init"),Alpine.magic("app",e=>r),Alpine.directive("render",(e,{modifiers:t,expression:n},{evaluate:i,cleanup:o})=>{let s=a=>{a.preventDefault(),r.render(i(n))};r.$on(e,"click",s),e.style.cursor="pointer",o(()=>{r.$off(e,"click",s)})}),Alpine.directive("template",(e,{expression:t},{effect:n,cleanup:i})=>{let o=Alpine.evaluateLater(e,t||"template");var s;let a=()=>{s=null,Alpine.mutateDom(()=>{r.$empty(e,c=>Alpine.destroyTree(c))})};n(()=>o(c=>{if(!c)return a();c!==s&&g(e,c),s=c})),i(a)})});r.fetchOpts=function(e){var t=e.headers||{},n=Object.assign({headers:t,method:e.type||"POST",cache:"default"},e.fetchOptions),i=e.data;return n.method=="GET"||n.method=="HEAD"?d(i)&&(e.url+="?"+new URLSearchParams(i).toString()):l(i)?(n.body=i,t["content-type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"):i instanceof FormData?(n.body=i,delete t["content-type"]):d(i)?(n.body=JSON.stringify(i),t["content-type"]="application/json; charset=UTF-8"):i&&(n.body=i,t["content-type"]=e.contentType||"application/octet-stream"),n};r.fetch=function(e,t){try{let n=r.fetchOpts(e);window.fetch(e.url,n).then(async i=>{var o,s,a={status:i.status,headers:{},type:i.type};for(let c of i.headers)a.headers[c[0].toLowerCase()]=c[1];if(!i.ok){if(/\/json/.test(a.headers["content-type"])){let c=await i.json();o={status:i.status};for(let $ in c)o[$]=c[$]}else o={message:await i.text(),status:i.status};return r.call(t,o,s,a)}switch(e.dataType){case"text":s=await i.text();break;case"blob":s=await i.blob();break;default:s=/\/json/.test(a.headers["content-type"])?await i.json():await i.text()}r.call(t,null,s,a)}).catch(i=>{r.call(t,i)})}catch(n){r.call(t,n)}};var E=r;window.app=E;})();
