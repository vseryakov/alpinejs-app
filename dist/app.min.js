(()=>{var r={base:"/app/",$target:"#app-main",index:"index",event:"component:event",templates:{},components:{},isF:f,isS:o,isE:m,isO:d,toCamel:b};function o(e){return typeof e=="string"&&e}function f(e){return typeof e=="function"&&e}function d(e){return typeof e=="object"&&e}function m(e){return e instanceof HTMLElement&&e}function b(e){return o(e)?e.toLowerCase().replace(/[.:_-](\w)/g,(t,n)=>n.toUpperCase()):""}r.noop=()=>{};r.log=(...e)=>console.log(...e);r.trace=(...e)=>{r.debug&&r.log(...e)};r.call=(e,t,...n)=>{if(f(e))return e(t,...n);if(typeof e=="object"){if(f(t))return t.call(e,...n);if(e&&f(e[t]))return e[t].call(e,...n)}};var p={};r.on=(e,t,n)=>{f(t)&&(p[e]||(p[e]=[]),p[e].push([t,o(n)]))};r.once=(e,t,n)=>{if(!f(t))return;let i=(...s)=>{r.off(e,i),t(...s)};r.on(e,i,n)};r.only=(e,t,n)=>{p[e]=f(t)?[t,o(n)]:[]};r.off=(e,t)=>{if(e&&t){if(!p[e])return;let n=f(t)?0:o(t)?1:-1;n>=0&&(p[e]=p[e].filter(i=>i[n]!==t))}else if(o(e))for(let n in p)p[n]=p[n].filter(i=>i[1]!==e)};r.emit=(e,...t)=>{if(r.trace("emit:",e,...t,r.debug>1&&p[e]),p[e])for(let n of p[e])n[0](...t);else if(o(e)&&e.endsWith(":*")){e=e.slice(0,-1);for(let n in p)if(n.startsWith(e))for(let i of p[n])i[0](...t)}};r.$param=(e,t)=>new URLSearchParams(location.search).get(e)||t||"";var P=e=>e.replace(/#([^\s"#']+)/g,(t,n)=>`#${CSS.escape(n)}`);r.$=(e,t)=>o(e)?(m(t)||document).querySelector(P(e)):null;r.$all=(e,t)=>o(e)?(m(t)||document).querySelectorAll(P(e)):null;r.$event=(e,t,n={})=>e instanceof EventTarget&&e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}));r.$on=(e,t,n,...i)=>f(n)&&e.addEventListener(t,n,...i);r.$off=(e,t,n,...i)=>f(n)&&e.removeEventListener(t,n,...i);r.$attr=(e,t,n)=>{if(o(e)&&(e=r.$(e)),!!m(e))return n===void 0?e.getAttribute(t):n===null?e.removeAttribute(t):e.setAttribute(t,n)};r.$empty=(e,t)=>{if(o(e)&&(e=r.$(e)),!!m(e)){for(;e.firstChild;){let n=e.firstChild;n.remove(),r.call(t,n)}return e}};r.$elem=(e,...t)=>{var n=document.createElement(e),i,s,c;d(t[0])&&(t=Object.entries(t[0]).flatMap(a=>a),c=t[1]);for(let a=0;a<t.length-1;a+=2)i=t[a],s=t[a+1],o(i)&&(f(s)?r.$on(n,i,s,{capture:c?.capture,passive:c?.passive,once:c?.once,signal:c?.signal}):i.startsWith("-")?n.style[i.substr(1)]=s:i.startsWith(".")?n[i.substr(1)]=s:i.startsWith("data-")?n.dataset[b(i.substr(5))]=s:i=="text"?n.textContent=s||"":s!==null&&n.setAttribute(i,s??""));return n};r.$parse=(e,t)=>(e=new window.DOMParser().parseFromString(e||"","text/html"),t==="doc"?e:t==="list"?Array.from(e.body.childNodes):e.body);r.$append=(e,t,n)=>{if(o(e)&&(e=r.$(e)),!m(e))return;let i;if(o(t))i=r.$parse(t,"doc");else if(t?.content?.nodeType==11)i={body:t.content.cloneNode(!0)};else return e;let s;for(;s=i.head?.firstChild;)e.appendChild(s);for(;s=i.body.firstChild;)e.appendChild(s),n&&s.nodeType==1&&r.call(n,s);return e};var w=[];r.$ready=e=>{if(w.push(e),document.readyState!="loading")for(;w.length;)setTimeout(r.call,0,w.shift())};r.$on(window,"DOMContentLoaded",()=>{for(;w.length;)setTimeout(r.call,0,w.shift())});r.parsePath=e=>{var t={name:"",params:{}},n,i=window.location;if(d(e))return Object.assign(t,e);if(!o(e))return t;var s=r.base;e.startsWith(i.origin)&&(e=e.substr(i.origin.length)),e.includes("://")&&(e=e.replace(/^(.*:\/\/[^/]*)/,"")),e.startsWith(s)&&(e=e.substr(s.length)),e.startsWith("/")&&(e=e.substr(1)),e==s.slice(1,-1)&&(e="");let c=e.indexOf("?");if(c>0&&(n=e.substr(c+1,1024),t.name=e=e.substr(0,c)),e.endsWith(".html")&&(e=e.slice(0,-5)),e.includes("/")){e=e.split("/").slice(0,7),t.name=e.shift();for(let a=0;a<e.length;a++)e[a]&&(t.params[`param${a+1}`]=e[a])}else t.name=e||"";if(n)for(let[a,l]of new URLSearchParams(n).entries())t.params[a]=l;return t};r.savePath=e=>{if(o(e)&&(e={name:e}),!!e?.name){var t=[e.name];if(e?.params)for(let n=1;n<7;n++)t.push(e.params[`param${n}`]||"");for(;!t.at(-1);)t.length--;t=t.join("/"),r.trace("savePath:",t,e),t&&(r.emit("path:push",window.location.origin+r.base+t),window.history.pushState(null,"",window.location.origin+r.base+t))}};r.restorePath=e=>{r.trace("restorePath:",e,r.index),r.render(e,r.index)};r.start=()=>{r.on("path:save",r.savePath),r.on("path:restore",r.restorePath),r.$ready(r.restorePath.bind(r,window.location.href))};r.$on(window,"popstate",()=>r.emit("path:restore",window.location.href));var h={},T;r.plugin=(e,t)=>{if(!e||!o(e))throw Error("type must be defined");if(t){for(let i of["render","cleanup","data"])if(t[i]&&!f(t[i]))throw Error(i+" must be a function");f(t?.Component)&&(r[`${e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}Component`]=t.Component)}var n=h[e]=h[e]||{};return t?.default&&(T=n),Object.assign(n,t)};r.$data=(e,t)=>{o(e)&&(e=r.$(e));for(let n in h){if(!h[n].data)continue;let i=h[n].data(e,t);if(i)return i}};r.resolve=(e,t)=>{let n=r.parsePath(e);r.trace("resolve:",e,t,n);var i=n?.name,s=r.templates,c=r.components,a=n.template||s[i]||document.getElementById(i);if(!a&&t&&(a=s[t]||document.getElementById(t),a&&(n.name=t)),o(a)&&a.startsWith("#")?a=document.getElementById(n.otemplate=a.substr(1)):o(a)&&a.startsWith("$")&&(a=s[n.otemplate=a.substr(1)]),!!a){n.template=a;var l=c[i]||c[n.name];return o(l)&&(l=c[n.ocomponent=l]),n.component=l,n}};r.render=(e,t)=>{var n=r.resolve(e,t);if(!n)return;var i=n.params=Object.assign(n.params||{},e?.params);i.$target=e.$target||i.$target||r.$target,r.trace("render:",e,n.name,n.params);let s=m(i.$target)||r.$(i.$target);if(s){var c=n.component?.$type||e?.plugin||i.$plugin;if(c=h[c]||T,!!c?.render){if(i.$target==r.$target){var a={name:n.name,params:i};if(r.emit(r.event,"prepare:delete",a),a.stop)return;var l=Object.values(h);for(let u of l.filter(v=>v.cleanup))r.call(u.cleanup,s);e?.$nohistory||i.$nohistory||n.component?.$nohistory||r.$nohistory||queueMicrotask(()=>{r.emit("path:save",n)})}return r.emit("component:render",n),c.render(s,n),n}}};r.on("alpine:init",()=>{for(let e in h)r.call(h[e],"init")});var S=class{params={};constructor(t,n){this.$name=t,Object.assign(this.params,n),this._handleEvent=D.bind(this),this._onCreate=this.onCreate||null,this._onDelete=this.onDelete||null}init(t){r.trace("init:",this.$type,this.$name),Object.assign(this.params,t),r.emit("component:create",{type:this.$type,name:this.$name,component:this,element:this.$el,params:this.params}),this.params.$noevents||r.on(r.event,this._handleEvent),r.call(this._onCreate?.bind(this,this.params))}destroy(){r.trace("destroy:",this.$type,this.$name),r.off(r.event,this._handleEvent),r.emit("component:delete",{type:this.$type,name:this.$name,component:this,element:this.$el,params:this.params}),r.call(this._onDelete?.bind(this)),this.params={},delete this.$root}};function D(e,...t){if(this.onEvent&&(r.trace("event:",this.$type,this.$name,e,...t),r.call(this.onEvent?.bind(this.$data||this),e,...t)),!!o(e)){var n=b("on_"+e);this[n]&&(r.trace("event:",this.$type,this.$name,n,...t),r.call(this[n]?.bind(this.$data||this),...t))}}var E=S;var y="alpine",_=class extends E{static $type=y;constructor(t,n){super(t,n),this.$type=y}init(){super.init(this.$root._x_params)}},A=class extends HTMLElement{connectedCallback(){queueMicrotask(()=>{O(this,this.localName.substr(4))})}};function O(e,t){if(!(o(t)&&(t=r.resolve(t),!t))){if(r.$empty(e),!t.component)Alpine.mutateDom(()=>{r.$append(e,t.template,Alpine.initTree)});else{Alpine.data(t.name,()=>new t.component(t.name));let n=r.$elem("div","x-data",t.name,"._x_params",t.params);r.$append(n,t.template),Alpine.mutateDom(()=>{e.appendChild(n),Alpine.initTree(n),delete n._x_params})}return t}}function L(e,t){if(m(e)||(e=r.$(r.$target+" div")),!!e)return typeof t=="number"?e._x_dataStack?.at(t):Alpine.closestDataStack(e)[0]}function W(){for(let[e,t]of Object.entries(r.components)){let n=`app-${t?.$tag||e}`;t?.$type!=y||customElements.get(n)||(customElements.define(n,class extends A{}),Alpine.data(e,()=>new t(e)))}}function k(e,t){!e.url&&!/^(https?:\/\/|\/|.+\.html(\?|$)).+/.test(e)||r.fetch(e,(n,i,s)=>{if(n||!o(i))return console.warn("$render: Text expected from",e,"got",n,i);o(e)&&(e=r.parsePath(e)),e.template=i,e.name=e.params?.$name||e.name,t&&(r.templates[e.name]=i),r.render(e)})}r.plugin(y,{render:O,Component:_,data:L,init:W,default:1});r.$on(document,"alpine:init",()=>{r.emit("alpine:init"),Alpine.magic("app",e=>r),Alpine.magic("component",e=>Alpine.closestDataStack(e).find(t=>t.$type==y&&t.$name)),Alpine.magic("parent",e=>Alpine.closestDataStack(e).filter(t=>t.$type==y&&t.$name)[1]),Alpine.directive("render",(e,{modifiers:t,expression:n},{evaluate:i,cleanup:s})=>{let c=a=>{let l=i(n);l&&(a.preventDefault(),t.includes("stop")&&a.stopPropagation(),(l.url||!r.render(l))&&k(l,t.includes("cache")))};r.$on(e,"click",c),e.style.cursor="pointer",s(()=>{r.$off(e,"click",c)})}),Alpine.directive("template",(e,{modifiers:t,expression:n},{effect:i,cleanup:s})=>{let c=Alpine.evaluateLater(e,n);var a;let l=()=>{a=null,Alpine.mutateDom(()=>{r.$empty(e,u=>Alpine.destroyTree(u)),t.includes("show")&&e.style.setProperty("display","none",t.includes("important")?"important":void 0)})};i(()=>c(u=>{if(!u)return l();if(u!==a){let C=r.resolve(u);if(!C)return;let $={};for(let g=0;g<t.length;g++){let x=t[g];switch(x){case"params":var v=Alpine.$data(e);if(!d(v[t[g+1]]))break;C.params=Object.assign(v[t[g+1]],C.params);break;case"inline":$.inline="inline-block";break;default:$[x]=x}}O(e,C)&&$.show&&($.nonempty&&!e.firstChild?e.style.setProperty("display","none",$.important):e.style.setProperty("display",$.flex||$.inline||"block",$.important))}a=u})),s(l)}),Alpine.directive("scope-level",(e,{expression:t},{evaluate:n})=>{let i=Alpine.closestDataStack(e);e._x_dataStack=i.slice(0,parseInt(n(t||""))||0)})});r.fetchOpts=function(e){var t=e.headers||{},n=Object.assign({headers:t,method:e.type||"GET",cache:"default"},e.fetchOptions),i=e.data;return n.method=="GET"||n.method=="HEAD"?d(i)&&(e.url+="?"+new URLSearchParams(i).toString()):o(i)?(n.body=i,t["content-type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"):i instanceof FormData?(n.body=i,delete t["content-type"]):d(i)?(n.body=JSON.stringify(i),t["content-type"]="application/json; charset=UTF-8"):i&&(n.body=i,t["content-type"]=e.contentType||"application/octet-stream"),n};r.fetch=function(e,t){try{o(e)&&(e={url:e});let n=r.fetchOpts(e);r.trace("fetch:",n,e),window.fetch(e.url,n).then(async i=>{var s,c,a={status:i.status,headers:{},type:i.type,url:i.url,redirected:i.redirected};for(let l of i.headers)a.headers[l[0].toLowerCase()]=l[1];if(!i.ok){if(/\/json/.test(a.headers["content-type"])){let l=await i.json();s={status:i.status};for(let u in l)s[u]=l[u]}else s={message:await i.text(),status:i.status};return r.call(t,s,c,a)}switch(e.dataType){case"text":c=await i.text();break;case"blob":c=await i.blob();break;default:c=/\/json/.test(a.headers["content-type"])?await i.json():await i.text()}r.call(t,null,c,a)}).catch(i=>{r.call(t,i)})}catch(n){r.call(t,n)}};r.afetch=function(e){return new Promise((t,n)=>{r.fetch(e,(i,s,c)=>{if(i)return n(i,s,c);t(s,c)})})};r.Component=E;var j=r;window.app=j;})();
